<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="æ¦‚å¿µ ä¸­æ–­ç”±ç¡¬ä»¶äº§ç”Ÿï¼Œå¹¶å‘é€åˆ°ä¸­æ–­æ§åˆ¶å™¨ï¼Œä¸­æ–­æ§åˆ¶å™¨å†å‘é€ä¸­æ–­åˆ°CPUï¼ŒCPUæ£€æµ‹åˆ°ä¸­æ–­ä¿¡å·åï¼Œä¼šä¸­æ–­å½“å‰çš„å·¥ä½œï¼Œæ¯ä¸ªä¸­æ–­éƒ½æœ‰IRQï¼ˆä¸­æ–­è¯·æ±‚ï¼‰ï¼ŒåŸºäºIRQï¼ŒCPUå°†ä¸­æ–­è¯·æ±‚åˆ†å‘åˆ°å¯¹åº”çš„ç¡¬ä»¶é©±åŠ¨ä¸Šé€šçŸ¥æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿä¼šå¯¹ä¸­æ–­è¿›è¡Œå¤„ç†ã€‚\n"><title>Linuxä¸­æ–­</title><link rel=canonical href=/post/linux-interrupt/><link rel=stylesheet href=/scss/style.min.833d6eed45de56f48306bf57268d5b8cdfc8a60e8e7bdc99810464fcd033f7c6.css><meta property='og:title' content="Linuxä¸­æ–­"><meta property='og:description' content="æ¦‚å¿µ ä¸­æ–­ç”±ç¡¬ä»¶äº§ç”Ÿï¼Œå¹¶å‘é€åˆ°ä¸­æ–­æ§åˆ¶å™¨ï¼Œä¸­æ–­æ§åˆ¶å™¨å†å‘é€ä¸­æ–­åˆ°CPUï¼ŒCPUæ£€æµ‹åˆ°ä¸­æ–­ä¿¡å·åï¼Œä¼šä¸­æ–­å½“å‰çš„å·¥ä½œï¼Œæ¯ä¸ªä¸­æ–­éƒ½æœ‰IRQï¼ˆä¸­æ–­è¯·æ±‚ï¼‰ï¼ŒåŸºäºIRQï¼ŒCPUå°†ä¸­æ–­è¯·æ±‚åˆ†å‘åˆ°å¯¹åº”çš„ç¡¬ä»¶é©±åŠ¨ä¸Šé€šçŸ¥æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿä¼šå¯¹ä¸­æ–­è¿›è¡Œå¤„ç†ã€‚\n"><meta property='og:url' content='/post/linux-interrupt/'><meta property='og:site_name' content='404é¢‘é“'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:published_time' content='2018-11-30T21:09:20+00:00'><meta property='article:modified_time' content='2018-11-30T21:09:20+00:00'><meta name=twitter:title content="Linuxä¸­æ–­"><meta name=twitter:description content="æ¦‚å¿µ ä¸­æ–­ç”±ç¡¬ä»¶äº§ç”Ÿï¼Œå¹¶å‘é€åˆ°ä¸­æ–­æ§åˆ¶å™¨ï¼Œä¸­æ–­æ§åˆ¶å™¨å†å‘é€ä¸­æ–­åˆ°CPUï¼ŒCPUæ£€æµ‹åˆ°ä¸­æ–­ä¿¡å·åï¼Œä¼šä¸­æ–­å½“å‰çš„å·¥ä½œï¼Œæ¯ä¸ªä¸­æ–­éƒ½æœ‰IRQï¼ˆä¸­æ–­è¯·æ±‚ï¼‰ï¼ŒåŸºäºIRQï¼ŒCPUå°†ä¸­æ–­è¯·æ±‚åˆ†å‘åˆ°å¯¹åº”çš„ç¡¬ä»¶é©±åŠ¨ä¸Šé€šçŸ¥æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿä¼šå¯¹ä¸­æ–­è¿›è¡Œå¤„ç†ã€‚\n"><link rel="shortcut icon" href=/images/avatar.jpeg></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_16fb6c03614f4da2.jpeg width=300 height=280 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ğŸ“¡</span></figure><div class=site-meta><h1 class=site-name><a href=/>404é¢‘é“</a></h1><h2 class=site-description>å­¦ä¹ ç¬”è®°</h2></div></header><ol class=menu-social><li><a href=https://github.com/kuring target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/about/><svg class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="7" r="4"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>å…³äºæˆ‘</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>å½’æ¡£</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>æœç´¢</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>æš—è‰²æ¨¡å¼</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#ä¸­æ–­æ§åˆ¶å™¨>ä¸­æ–­æ§åˆ¶å™¨</a></li><li><a href=#è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­>è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­</a></li></ol><ol><li><a href=#mpstat>mpstat</a></li><li><a href=#lspci>lspci</a></li><li><a href=#ethtool>ethtool</a></li><li><a href=#sar>sar</a></li><li><a href=#ä¿®æ”¹ä¸­æ–­çš„cpuåˆ†é…>ä¿®æ”¹ä¸­æ–­çš„cpuåˆ†é…</a></li><li><a href=#æŸ¥çœ‹è½¯ä¸­æ–­>æŸ¥çœ‹è½¯ä¸­æ–­</a></li><li><a href=#æŸ¥çœ‹æ•°æ®åŒ…ç»Ÿè®¡>æŸ¥çœ‹æ•°æ®åŒ…ç»Ÿè®¡</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/post/linux-interrupt/>Linuxä¸­æ–­</a></h2></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published datetime=2018-11-30T21:09:20Z>2018-11-30</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>é˜…è¯»æ—¶é•¿: 8 åˆ†é’Ÿ</time></div></footer></div></header><section class=article-content><h1 id=æ¦‚å¿µ>æ¦‚å¿µ</h1><p>ä¸­æ–­ç”±ç¡¬ä»¶äº§ç”Ÿï¼Œå¹¶å‘é€åˆ°ä¸­æ–­æ§åˆ¶å™¨ï¼Œä¸­æ–­æ§åˆ¶å™¨å†å‘é€ä¸­æ–­åˆ°CPUï¼ŒCPUæ£€æµ‹åˆ°ä¸­æ–­ä¿¡å·åï¼Œä¼šä¸­æ–­å½“å‰çš„å·¥ä½œï¼Œæ¯ä¸ªä¸­æ–­éƒ½æœ‰IRQï¼ˆä¸­æ–­è¯·æ±‚ï¼‰ï¼ŒåŸºäºIRQï¼ŒCPUå°†ä¸­æ–­è¯·æ±‚åˆ†å‘åˆ°å¯¹åº”çš„ç¡¬ä»¶é©±åŠ¨ä¸Šé€šçŸ¥æ“ä½œç³»ç»Ÿï¼Œæ“ä½œç³»ç»Ÿä¼šå¯¹ä¸­æ–­è¿›è¡Œå¤„ç†ã€‚</p><h2 id=ä¸­æ–­æ§åˆ¶å™¨>ä¸­æ–­æ§åˆ¶å™¨</h2><p>å¸¸è§çš„ä¸­æ–­æ§åˆ¶å™¨æœ‰ä¸¤ç§ï¼šå¯ç¼–ç¨‹ä¸­æ–­æ§åˆ¶å™¨8259Aå’Œé«˜çº§å¯ç¼–ç¨‹ä¸­æ–­æ§åˆ¶å™¨ï¼ˆAPICï¼‰ã€‚ä¼ ç»Ÿçš„8259Aåªé€‚åˆå•CPUçš„æƒ…å†µï¼Œç°åœ¨éƒ½æ˜¯å¤šCPUã€å¤šæ ¸å¿ƒçš„SMPä½“ç³»ï¼Œæ‰€ä»¥ä¸ºäº†å……åˆ†åˆ©ç”¨SMPä½“ç³»ç»“æ„ï¼ŒæŠŠä¸­æ–­ä¼ é€’ç»™ç³»ç»Ÿä¸Šçš„æ¯ä¸ªCPUä»¥ä¾¿æ›´å¥½å®ç°å¹¶è¡Œå’Œæé«˜æ€§èƒ½ï¼ŒIntelå¼•å…¥äº†é«˜çº§å¯ç¼–ç¨‹ä¸­æ–­æ§åˆ¶å™¨ï¼ˆAPICï¼‰ã€‚</p><p>å…‰æœ‰é«˜çº§å¯ç¼–ç¨‹ä¸­æ–­æ§åˆ¶å™¨çš„ç¡¬ä»¶æ”¯æŒè¿˜ä¸å¤Ÿï¼ŒLinuxå†…æ ¸è¿˜å¿…é¡»èƒ½åˆ©ç”¨è¿™äº›ç¡¬ä»¶çš„ç‰¹è´¨ï¼Œæ‰€ä»¥åªæœ‰kernel 2.4ä»¥åçš„ç‰ˆæœ¬æ‰æ”¯æŒæŠŠä¸åŒçš„ç¡¬ä»¶ä¸­æ–­è¯·æ±‚ï¼ˆIRQsï¼‰åˆ†é…åˆ°ç‰¹å®šçš„CPUæ ¸å¿ƒä¸Šï¼Œè¿™ä¸ªç»‘å®šæŠ€æœ¯è¢«ç§°ä¸ºSMP IRQ Affinityã€‚</p><p>åœ¨è®¾ç½®ç½‘å¡ä¸­æ–­çš„cpu coreæ—¶ï¼Œæœ‰ä¸€ä¸ªé™åˆ¶å°±æ˜¯ï¼ŒIO-APIC æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼ï¼šlogic å’Œ physicalï¼Œåœ¨ logic æ¨¡å¼ä¸‹ IO-APIC å¯ä»¥åŒæ—¶åˆ†å¸ƒåŒä¸€ç§ IO ä¸­æ–­åˆ°8é¢— CPU (core) ä¸Šï¼ˆå—åˆ° bitmask å¯„å­˜å™¨çš„é™åˆ¶ï¼Œå› ä¸º bitmask åªæœ‰8ä½é•¿ã€‚ï¼‰ï¼›åœ¨ physical æ¨¡å¼ä¸‹ä¸èƒ½åŒæ—¶åˆ†å¸ƒåŒä¸€ä¸­æ–­åˆ°ä¸åŒ CPU ä¸Šï¼Œæ¯”å¦‚ï¼Œä¸èƒ½è®© eth0 ä¸­æ–­åŒæ—¶ç”± CPU0 å’Œ CPU1 å¤„ç†ï¼Œè¿™ä¸ªæ—¶å€™åªèƒ½å®šä½ eth0 åˆ° CPU0ã€eth1 åˆ° CPU1ï¼Œä¹Ÿå°±æ˜¯è¯´ eth0 ä¸­æ–­ä¸èƒ½åƒ logic æ¨¡å¼é‚£æ ·å¯ä»¥åŒæ—¶ç”±å¤šä¸ª CPU å¤„ç†ã€‚</p><h2 id=è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­>è½¯ä¸­æ–­å’Œç¡¬ä¸­æ–­</h2><p>ä¸ºäº†è§£å†³ä¸­æ–­å¤„ç†ç¨‹åºæ‰§è¡Œæ—¶é—´è¿‡é•¿å’Œä¸­æ–­ä¸¢å¤±çš„é—®é¢˜ï¼ŒLinuxç³»ç»Ÿå°†ä¸­æ–­åˆ†ä¸ºä¸ŠåŠéƒ¨å’Œä¸‹åŠéƒ¨ã€‚</p><p>ä¸ŠåŠéƒ¨åœ¨ä¸­æ–­ç¦æ­¢æ¨¡å¼ä¸‹è¿è¡Œï¼Œç”¨æ¥å¿«é€Ÿå¤„ç†ä¸­æ–­ï¼Œä¸»è¦ç”¨æ¥å¤„ç†è·Ÿç¡¬ä»¶å¯†åˆ‡ç›¸å…³çš„å·¥ä½œã€‚</p><p>ä¸‹åŠéƒ¨å¤„ç†ä¸ŠåŠéƒ¨æœªå®Œæˆçš„å·¥ä½œï¼Œé€šå¸¸ä»¥å†…æ ¸çº¿ç¨‹çš„æ–¹å¼è¿è¡Œã€‚</p><p>ä»¥Linuxæ¥æ”¶ç½‘å¡æ•°æ®åŒ…ä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼š</p><p>ç½‘å¡æ¥æ”¶åˆ°ä¸€ä¸ªæ•°æ®åŒ…åï¼Œä¼šé€šè¿‡ç¡¬ä»¶ä¸­æ–­çš„æ–¹å¼é€šçŸ¥å†…æ ¸æ–°çš„æ•°æ®åˆ°äº†ã€‚å†…æ ¸ä¼šè°ƒç”¨ä¸­æ–­å¤„ç†ç¨‹åºè¿›è¡Œå¤„ç†ã€‚</p><p>ä¸ŠåŠéƒ¨å°†ç½‘å¡ä¸­çš„æ•°æ®å†™å…¥åˆ°å†…å­˜ä¸­ï¼Œå¹¶æ›´æ–°ä¸€ä¸‹ç¡¬ä»¶å¯„å­˜å™¨çš„çŠ¶æ€ï¼Œæœ€åå‘é€ä¸€ä¸ªè½¯ä¸­æ–­ä¿¡å·ï¼Œé€šçŸ¥ä¸‹åŠéƒ¨è¿›ä¸€æ­¥çš„å¤„ç†ã€‚</p><p>ä¸‹åŠéƒ¨è¢«è½¯ä¸­æ–­ä¿¡å·å”¤é†’åï¼Œä»å†…å­˜ä¸­è¯»åˆ°æ•°æ®ï¼ŒæŒ‰ç…§ç½‘ç»œåè®®æ ˆå¯¹æ•°æ®è¿›è¡Œè§£æå’Œå¤„ç†ï¼Œå¹¶å‘é€ç»™åº”ç”¨ç¨‹åºã€‚</p><p>ä¸Šé¢æ‰€è¯´çš„ä¸ŠåŠéƒ¨å³ç¡¬ä¸­æ–­ï¼Œä¸‹åŠéƒ¨å³è½¯ä¸­æ–­ï¼Œä½†ä¸€äº›å†…æ ¸è‡ªå®šä¹‰çš„äº‹ä»¶ä¹Ÿå±äºè½¯ä¸­æ–­ï¼Œæ¯”å¦‚å†…æ ¸è°ƒåº¦å’ŒRCUé”ç­‰ã€‚</p><p>ç¡¬ä¸­æ–­ï¼šç”±å¤–è®¾äº§ç”Ÿï¼Œç”¨æ¥é€šçŸ¥æ“ä½œç³»ç»Ÿå¤–è®¾çŠ¶æ€çš„å˜åŒ–ã€‚åœ¨å¤„ç†ä¸­æ–­çš„åŒæ—¶è¦å…³é—­ä¸­æ–­ã€‚ç‰¹ç‚¹ä¸ºå¤„ç†è¦å°½å¯èƒ½çš„å¿«ã€‚</p><p>è½¯ä¸­æ–­ï¼šä¸ºäº†æ»¡è¶³å®æ—¶æ€§è¦æ±‚ï¼Œç¡¬ä¸­æ–­å¤„ç†æ—¶é—´éƒ½æ¯”è¾ƒçŸ­ï¼Œå°†æ—¶é—´æ¯”è¾ƒé•¿çš„ä¸­æ–­æ”¾åˆ°è½¯ä¸­æ–­ä¸­æ¥å®Œæˆï¼Œç§°ä¸ºä¸‹åŠéƒ¨ã€‚intå°±æ˜¯è½¯ä¸­æ–­æŒ‡ä»¤ï¼Œä¸­æ–­å‘é‡è¡¨æ˜¯ä¸­æ–­å·å’Œä¸­æ–­å¤„ç†ç¨‹åºçš„å¯¹åº”è¡¨ã€‚æ¯ä¸ªCPUå¯¹åº”ä¸€ä¸ªè½¯ä¸­æ–­å†…æ ¸çº¿ç¨‹<code>ksoftirqd/cpuç¼–å·</code>ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@120-14-29-SH-1037-B07 ~]# ps -ef | grep ksoft
</span></span><span class=line><span class=cl>root           3       2  0  2016 ?        01:47:12 [ksoftirqd/0]
</span></span><span class=line><span class=cl>root          21       2  0  2016 ?        00:47:51 [ksoftirqd/1]
</span></span><span class=line><span class=cl>root          26       2  0  2016 ?        00:47:34 [ksoftirqd/2]
</span></span><span class=line><span class=cl>root          31       2  0  2016 ?        00:47:46 [ksoftirqd/3]
</span></span></code></pre></td></tr></table></div></div><p>ä¸­æ–­åµŒå¥—ï¼šç¡¬ä¸­æ–­å¯ä»¥åµŒå¥—ï¼Œå³æ–°çš„ç¡¬ä¸­æ–­å¯ä»¥æ‰“æ–­æ­£åœ¨æ‰§è¡Œçš„ä¸­æ–­ï¼Œä½†åŒç§ä¸­æ–­ä¸å¯ä»¥ã€‚è½¯ä¸­æ–­ä¸å¯åµŒå¥—ï¼Œä½†ç›¸åŒç±»å‹ä¸­æ–­å¯åœ¨ä¸åŒçš„cpuä¸Šæ‰§è¡Œã€‚</p><h1 id=ç›¸å…³å‘½ä»¤>ç›¸å…³å‘½ä»¤</h1><h2 id=mpstat>mpstat</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># æ˜¾ç¤ºcpuå¤„ç†çš„ä¸­æ–­æ•°é‡
</span></span><span class=line><span class=cl>[root@103-17-164-sh-100-k07 ~]# mpstat -I SUM 1
</span></span><span class=line><span class=cl>Linux 3.10.0-327.10.1.el7.x86_64 (103-17-164-sh-100-k07.yidian.com)     09/09/2017      _x86_64_        (4 CPU)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>05:27:59 PM  CPU    intr/s
</span></span><span class=line><span class=cl>05:28:00 PM  all  61274.00
</span></span><span class=line><span class=cl>05:28:01 PM  all  61712.00
</span></span><span class=line><span class=cl>05:28:02 PM  all  62315.00
</span></span><span class=line><span class=cl>05:28:03 PM  all  59280.00
</span></span><span class=line><span class=cl>^C
</span></span><span class=line><span class=cl>Average:     all  61145.25
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># æ˜¾ç¤ºæ¯ä¸ªæ ¸å¤„ç†çš„ä¸­æ–­æ•°é‡
</span></span><span class=line><span class=cl>[root@103-17-164-sh-100-k07 ~]# mpstat -I SUM 1 -P ALL
</span></span><span class=line><span class=cl>Linux 3.10.0-327.10.1.el7.x86_64 (103-17-164-sh-100-k07.yidian.com)     09/09/2017      _x86_64_        (4 CPU)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>05:30:30 PM  CPU    intr/s
</span></span><span class=line><span class=cl>05:30:31 PM  all  61446.00
</span></span><span class=line><span class=cl>05:30:31 PM    0  40489.00
</span></span><span class=line><span class=cl>05:30:31 PM    1   6839.00
</span></span><span class=line><span class=cl>05:30:31 PM    2   6935.00
</span></span><span class=line><span class=cl>05:30:31 PM    3   7185.00
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># æ˜¾ç¤ºæ›´è¯¦ç»†çš„ä¿¡æ¯
</span></span><span class=line><span class=cl>[root@120-14-31-SH-1037-B07 ~]# mpstat -P ALL 1
</span></span><span class=line><span class=cl>Linux 3.10.0-327.el7.x86_64 (120-14-31-SH-1037-B07.yidian.com)  09/10/2017      _x86_64_        (4 CPU)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>01:15:09 AM  CPU    %usr   %nice    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle
</span></span><span class=line><span class=cl>01:15:10 AM  all    6.35    0.00   11.64    0.00    0.00    7.67    0.00    0.00    0.00   74.34
</span></span><span class=line><span class=cl>01:15:10 AM    0    5.05    0.00   11.11    0.00    0.00    0.00    0.00    0.00    0.00   83.84
</span></span><span class=line><span class=cl>01:15:10 AM    1    6.38    0.00   12.77    0.00    0.00    9.57    0.00    0.00    0.00   71.28
</span></span><span class=line><span class=cl>01:15:10 AM    2    8.70    0.00   10.87    0.00    0.00   14.13    0.00    0.00    0.00   66.30
</span></span><span class=line><span class=cl>01:15:10 AM    3    6.32    0.00   12.63    0.00    0.00    7.37    0.00    0.00    0.00   73.68
</span></span></code></pre></td></tr></table></div></div><h2 id=lspci>lspci</h2><p>å¯ä»¥æ¥æŸ¥çœ‹ç½‘å¡å‹å·ï¼Œé©±åŠ¨ç­‰ä¿¡æ¯ï¼Œå†…å®¹è¾ƒå¤š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=mi>103</span><span class=o>-</span><span class=mi>17</span><span class=o>-</span><span class=mi>164</span><span class=o>-</span><span class=n>sh</span><span class=o>-</span><span class=mi>100</span><span class=o>-</span><span class=n>k07</span> <span class=o>~</span><span class=p>]</span><span class=c1># lspci -vvv | more</span>
</span></span><span class=line><span class=cl><span class=mi>00</span><span class=p>:</span><span class=mf>00.0</span> <span class=n>Host</span> <span class=n>bridge</span><span class=p>:</span> <span class=n>Intel</span> <span class=n>Corporation</span> <span class=n>Xeon</span> <span class=n>E7</span> <span class=n>v2</span><span class=o>/</span><span class=n>Xeon</span> <span class=n>E5</span> <span class=n>v2</span><span class=o>/</span><span class=n>Core</span> <span class=n>i7</span> <span class=n>DMI2</span> <span class=p>(</span><span class=n>rev</span> <span class=mi>04</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>Subsystem</span><span class=p>:</span> <span class=n>Super</span> <span class=n>Micro</span> <span class=n>Computer</span> <span class=n>Inc</span> <span class=n>Device</span> <span class=mi>0668</span>
</span></span><span class=line><span class=cl>        <span class=ne>Control</span><span class=p>:</span> <span class=n>I</span><span class=o>/</span><span class=n>O</span><span class=o>-</span> <span class=n>Mem</span><span class=o>-</span> <span class=n>BusMaster</span><span class=o>-</span> <span class=n>SpecCycle</span><span class=o>-</span> <span class=n>MemWINV</span><span class=o>-</span> <span class=n>VGASnoop</span><span class=o>-</span> <span class=n>ParErr</span><span class=o>-</span> <span class=n>Stepping</span><span class=o>-</span> <span class=n>SERR</span><span class=o>-</span> <span class=n>FastB2B</span><span class=o>-</span> <span class=n>DisINTx</span><span class=o>-</span>
</span></span><span class=line><span class=cl>        <span class=n>Status</span><span class=p>:</span> <span class=n>Cap</span><span class=o>+</span> <span class=mi>66</span><span class=n>MHz</span><span class=o>-</span> <span class=n>UDF</span><span class=o>-</span> <span class=n>FastB2B</span><span class=o>-</span> <span class=n>ParErr</span><span class=o>-</span> <span class=n>DEVSEL</span><span class=o>=</span><span class=n>fast</span> <span class=o>&gt;</span><span class=n>TAbort</span><span class=o>-</span> <span class=o>&lt;</span><span class=n>TAbort</span><span class=o>-</span> <span class=o>&lt;</span><span class=n>MAbort</span><span class=o>-</span> <span class=o>&gt;</span><span class=n>SERR</span><span class=o>-</span> <span class=o>&lt;</span><span class=n>PERR</span><span class=o>-</span> <span class=n>INTx</span><span class=o>-</span>
</span></span><span class=line><span class=cl>        <span class=n>Interrupt</span><span class=p>:</span> <span class=n>pin</span> <span class=n>A</span> <span class=n>routed</span> <span class=n>to</span> <span class=n>IRQ</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=n>Capabilities</span><span class=p>:</span> <span class=p>[</span><span class=mi>90</span><span class=p>]</span> <span class=n>Express</span> <span class=p>(</span><span class=n>v2</span><span class=p>)</span> <span class=n>Root</span> <span class=n>Port</span> <span class=p>(</span><span class=n>Slot</span><span class=o>-</span><span class=p>),</span> <span class=n>MSI</span> <span class=mi>00</span>
</span></span><span class=line><span class=cl>                <span class=n>DevCap</span><span class=p>:</span> <span class=n>MaxPayload</span> <span class=mi>128</span> <span class=n>bytes</span><span class=p>,</span> <span class=n>PhantFunc</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>                        <span class=n>ExtTag</span><span class=o>-</span> <span class=n>RBE</span><span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=n>DevCtl</span><span class=p>:</span> <span class=n>Report</span> <span class=n>errors</span><span class=p>:</span> <span class=n>Correctable</span><span class=o>-</span> <span class=n>Non</span><span class=o>-</span><span class=n>Fatal</span><span class=o>-</span> <span class=n>Fatal</span><span class=o>-</span> <span class=n>Unsupported</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                        <span class=n>RlxdOrd</span><span class=o>-</span> <span class=n>ExtTag</span><span class=o>-</span> <span class=n>PhantFunc</span><span class=o>-</span> <span class=n>AuxPwr</span><span class=o>-</span> <span class=n>NoSnoop</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                        <span class=n>MaxPayload</span> <span class=mi>128</span> <span class=n>bytes</span><span class=p>,</span> <span class=n>MaxReadReq</span> <span class=mi>128</span> <span class=n>bytes</span>
</span></span><span class=line><span class=cl>                <span class=n>DevSta</span><span class=p>:</span> <span class=n>CorrErr</span><span class=o>-</span> <span class=n>UncorrErr</span><span class=o>-</span> <span class=n>FatalErr</span><span class=o>-</span> <span class=n>UnsuppReq</span><span class=o>-</span> <span class=n>AuxPwr</span><span class=o>-</span> <span class=n>TransPend</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                <span class=n>LnkCap</span><span class=p>:</span> <span class=n>Port</span> <span class=c1>#0, Speed 5GT/s, Width x4, ASPM not supported, Exit Latency L0s &lt;64ns, L1 &lt;16us</span>
</span></span><span class=line><span class=cl>                        <span class=n>ClockPM</span><span class=o>-</span> <span class=n>Surprise</span><span class=o>+</span> <span class=n>LLActRep</span><span class=o>+</span> <span class=n>BwNot</span><span class=o>+</span>
</span></span><span class=line><span class=cl>                <span class=n>LnkCtl</span><span class=p>:</span> <span class=n>ASPM</span> <span class=n>Disabled</span><span class=p>;</span> <span class=n>RCB</span> <span class=mi>64</span> <span class=n>bytes</span> <span class=n>Disabled</span><span class=o>-</span> <span class=n>CommClk</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                        <span class=n>ExtSynch</span><span class=o>-</span> <span class=n>ClockPM</span><span class=o>-</span> <span class=n>AutWidDis</span><span class=o>-</span> <span class=n>BWInt</span><span class=o>-</span> <span class=n>AutBWInt</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                <span class=n>LnkSta</span><span class=p>:</span> <span class=n>Speed</span> <span class=n>unknown</span><span class=p>,</span> <span class=n>Width</span> <span class=n>x0</span><span class=p>,</span> <span class=n>TrErr</span><span class=o>-</span> <span class=n>Train</span><span class=o>-</span> <span class=n>SlotClk</span><span class=o>-</span> <span class=n>DLActive</span><span class=o>-</span> <span class=n>BWMgmt</span><span class=o>-</span> <span class=n>ABWMgmt</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                <span class=n>RootCtl</span><span class=p>:</span> <span class=n>ErrCorrectable</span><span class=o>-</span> <span class=n>ErrNon</span><span class=o>-</span><span class=n>Fatal</span><span class=o>-</span> <span class=n>ErrFatal</span><span class=o>-</span> <span class=n>PMEIntEna</span><span class=o>-</span> <span class=n>CRSVisible</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                <span class=n>RootCap</span><span class=p>:</span> <span class=n>CRSVisible</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                <span class=n>RootSta</span><span class=p>:</span> <span class=n>PME</span> <span class=n>ReqID</span> <span class=mi>0000</span><span class=p>,</span> <span class=n>PMEStatus</span><span class=o>-</span> <span class=n>PMEPending</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                <span class=n>DevCap2</span><span class=p>:</span> <span class=n>Completion</span> <span class=n>Timeout</span><span class=p>:</span> <span class=ne>Range</span> <span class=n>BCD</span><span class=p>,</span> <span class=n>TimeoutDis</span><span class=o>+</span><span class=p>,</span> <span class=n>LTR</span><span class=o>-</span><span class=p>,</span> <span class=n>OBFF</span> <span class=n>Not</span> <span class=n>Supported</span> <span class=n>ARIFwd</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                <span class=n>DevCtl2</span><span class=p>:</span> <span class=n>Completion</span> <span class=n>Timeout</span><span class=p>:</span> <span class=mi>50</span><span class=n>us</span> <span class=n>to</span> <span class=mi>50</span><span class=n>ms</span><span class=p>,</span> <span class=n>TimeoutDis</span><span class=o>-</span><span class=p>,</span> <span class=n>LTR</span><span class=o>-</span><span class=p>,</span> <span class=n>OBFF</span> <span class=n>Disabled</span> <span class=n>ARIFwd</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                <span class=n>LnkCtl2</span><span class=p>:</span> <span class=n>Target</span> <span class=n>Link</span> <span class=n>Speed</span><span class=p>:</span> <span class=mf>2.5</span><span class=n>GT</span><span class=o>/</span><span class=n>s</span><span class=p>,</span> <span class=n>EnterCompliance</span><span class=o>-</span> <span class=n>SpeedDis</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                         <span class=n>Transmit</span> <span class=n>Margin</span><span class=p>:</span> <span class=n>Normal</span> <span class=n>Operating</span> <span class=ne>Range</span><span class=p>,</span> <span class=n>EnterModifiedCompliance</span><span class=o>-</span> <span class=n>ComplianceSOS</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                         <span class=n>Compliance</span> <span class=n>De</span><span class=o>-</span><span class=n>emphasis</span><span class=p>:</span> <span class=o>-</span><span class=mi>6</span><span class=n>dB</span>
</span></span><span class=line><span class=cl>                <span class=n>LnkSta2</span><span class=p>:</span> <span class=n>Current</span> <span class=n>De</span><span class=o>-</span><span class=n>emphasis</span> <span class=n>Level</span><span class=p>:</span> <span class=o>-</span><span class=mi>6</span><span class=n>dB</span><span class=p>,</span> <span class=n>EqualizationComplete</span><span class=o>-</span><span class=p>,</span> <span class=n>EqualizationPhase1</span><span class=o>-</span>
</span></span><span class=line><span class=cl>                         <span class=n>EqualizationPhase2</span><span class=o>-</span><span class=p>,</span> <span class=n>EqualizationPhase3</span><span class=o>-</span><span class=p>,</span> <span class=n>LinkEqualizationRequest</span><span class=o>-</span>
</span></span><span class=line><span class=cl>        <span class=n>Capabilities</span><span class=p>:</span> <span class=p>[</span><span class=n>e0</span><span class=p>]</span> <span class=n>Power</span> <span class=n>Management</span> <span class=n>version</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>                <span class=n>Flags</span><span class=p>:</span> <span class=n>PMEClk</span><span class=o>-</span> <span class=n>DSI</span><span class=o>-</span> <span class=n>D1</span><span class=o>-</span> <span class=n>D2</span><span class=o>-</span> <span class=n>AuxCurrent</span><span class=o>=</span><span class=mi>0</span><span class=n>mA</span> <span class=n>PME</span><span class=p>(</span><span class=n>D0</span><span class=o>+</span><span class=p>,</span><span class=n>D1</span><span class=o>-</span><span class=p>,</span><span class=n>D2</span><span class=o>-</span><span class=p>,</span><span class=n>D3hot</span><span class=o>+</span><span class=p>,</span><span class=n>D3cold</span><span class=o>+</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=n>Status</span><span class=p>:</span> <span class=n>D0</span> <span class=n>NoSoftRst</span><span class=o>-</span> <span class=n>PME</span><span class=o>-</span><span class=n>Enable</span><span class=o>-</span> <span class=n>DSel</span><span class=o>=</span><span class=mi>0</span> <span class=n>DScale</span><span class=o>=</span><span class=mi>0</span> <span class=n>PME</span><span class=o>-</span>
</span></span><span class=line><span class=cl>        <span class=n>Capabilities</span><span class=p>:</span> <span class=p>[</span><span class=mi>100</span> <span class=n>v1</span><span class=p>]</span> <span class=n>Vendor</span> <span class=n>Specific</span> <span class=n>Information</span><span class=p>:</span> <span class=n>ID</span><span class=o>=</span><span class=mi>0002</span> <span class=n>Rev</span><span class=o>=</span><span class=mi>0</span> <span class=n>Len</span><span class=o>=</span><span class=mi>00</span><span class=n>c</span> <span class=o>&lt;</span><span class=err>?</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=n>Capabilities</span><span class=p>:</span> <span class=p>[</span><span class=mi>144</span> <span class=n>v1</span><span class=p>]</span> <span class=n>Vendor</span> <span class=n>Specific</span> <span class=n>Information</span><span class=p>:</span> <span class=n>ID</span><span class=o>=</span><span class=mi>0004</span> <span class=n>Rev</span><span class=o>=</span><span class=mi>1</span> <span class=n>Len</span><span class=o>=</span><span class=mi>03</span><span class=n>c</span> <span class=o>&lt;</span><span class=err>?</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=n>Capabilities</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=n>d0</span> <span class=n>v1</span><span class=p>]</span> <span class=n>Vendor</span> <span class=n>Specific</span> <span class=n>Information</span><span class=p>:</span> <span class=n>ID</span><span class=o>=</span><span class=mi>0003</span> <span class=n>Rev</span><span class=o>=</span><span class=mi>1</span> <span class=n>Len</span><span class=o>=</span><span class=mi>00</span><span class=n>a</span> <span class=o>&lt;</span><span class=err>?</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>        <span class=n>Capabilities</span><span class=p>:</span> <span class=p>[</span><span class=mi>280</span> <span class=n>v1</span><span class=p>]</span> <span class=n>Vendor</span> <span class=n>Specific</span> <span class=n>Information</span><span class=p>:</span> <span class=n>ID</span><span class=o>=</span><span class=mi>0005</span> <span class=n>Rev</span><span class=o>=</span><span class=mi>3</span> <span class=n>Len</span><span class=o>=</span><span class=mi>018</span> <span class=o>&lt;</span><span class=err>?</span><span class=o>&gt;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=o>...</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=ethtool>ethtool</h2><p>ç”¨æ¥æŸ¥çœ‹ç½‘å¡ä¿¡æ¯</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span><span class=lnt>113
</span><span class=lnt>114
</span><span class=lnt>115
</span><span class=lnt>116
</span><span class=lnt>117
</span><span class=lnt>118
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=mi>103</span><span class=o>-</span><span class=mi>17</span><span class=o>-</span><span class=mi>164</span><span class=o>-</span><span class=n>sh</span><span class=o>-</span><span class=mi>100</span><span class=o>-</span><span class=n>k07</span> <span class=o>~</span><span class=p>]</span><span class=c1># ethtool eth3</span>
</span></span><span class=line><span class=cl><span class=n>Settings</span> <span class=k>for</span> <span class=n>eth3</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>Supported</span> <span class=n>ports</span><span class=p>:</span> <span class=p>[</span> <span class=n>FIBRE</span> <span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>Supported</span> <span class=n>link</span> <span class=n>modes</span><span class=p>:</span>   <span class=mi>1000</span><span class=n>baseT</span><span class=o>/</span><span class=n>Full</span>
</span></span><span class=line><span class=cl>                                <span class=mi>10000</span><span class=n>baseT</span><span class=o>/</span><span class=n>Full</span>
</span></span><span class=line><span class=cl>        <span class=n>Supported</span> <span class=n>pause</span> <span class=n>frame</span> <span class=n>use</span><span class=p>:</span> <span class=n>No</span>
</span></span><span class=line><span class=cl>        <span class=n>Supports</span> <span class=n>auto</span><span class=o>-</span><span class=n>negotiation</span><span class=p>:</span> <span class=n>Yes</span>
</span></span><span class=line><span class=cl>        <span class=n>Advertised</span> <span class=n>link</span> <span class=n>modes</span><span class=p>:</span>  <span class=mi>1000</span><span class=n>baseT</span><span class=o>/</span><span class=n>Full</span>
</span></span><span class=line><span class=cl>                                <span class=mi>10000</span><span class=n>baseT</span><span class=o>/</span><span class=n>Full</span>
</span></span><span class=line><span class=cl>        <span class=n>Advertised</span> <span class=n>pause</span> <span class=n>frame</span> <span class=n>use</span><span class=p>:</span> <span class=n>No</span>
</span></span><span class=line><span class=cl>        <span class=n>Advertised</span> <span class=n>auto</span><span class=o>-</span><span class=n>negotiation</span><span class=p>:</span> <span class=n>Yes</span>
</span></span><span class=line><span class=cl>        <span class=n>Speed</span><span class=p>:</span> <span class=mi>10000</span><span class=n>Mb</span><span class=o>/</span><span class=n>s</span>
</span></span><span class=line><span class=cl>        <span class=n>Duplex</span><span class=p>:</span> <span class=n>Full</span>
</span></span><span class=line><span class=cl>        <span class=n>Port</span><span class=p>:</span> <span class=n>FIBRE</span>
</span></span><span class=line><span class=cl>        <span class=n>PHYAD</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=n>Transceiver</span><span class=p>:</span> <span class=n>external</span>
</span></span><span class=line><span class=cl>        <span class=n>Auto</span><span class=o>-</span><span class=n>negotiation</span><span class=p>:</span> <span class=n>on</span>
</span></span><span class=line><span class=cl>        <span class=n>Supports</span> <span class=n>Wake</span><span class=o>-</span><span class=n>on</span><span class=p>:</span> <span class=n>d</span>
</span></span><span class=line><span class=cl>        <span class=n>Wake</span><span class=o>-</span><span class=n>on</span><span class=p>:</span> <span class=n>d</span>
</span></span><span class=line><span class=cl>        <span class=n>Current</span> <span class=n>message</span> <span class=n>level</span><span class=p>:</span> <span class=mh>0x00000007</span> <span class=p>(</span><span class=mi>7</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                               <span class=n>drv</span> <span class=n>probe</span> <span class=n>link</span>
</span></span><span class=line><span class=cl>        <span class=n>Link</span> <span class=n>detected</span><span class=p>:</span> <span class=n>yes</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å¯æŸ¥çœ‹Ring bufferçš„å¤§å°</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=mi>103</span><span class=o>-</span><span class=mi>17</span><span class=o>-</span><span class=mi>164</span><span class=o>-</span><span class=n>sh</span><span class=o>-</span><span class=mi>100</span><span class=o>-</span><span class=n>k07</span> <span class=o>~</span><span class=p>]</span><span class=c1># ethtool -g eth3</span>
</span></span><span class=line><span class=cl><span class=n>Ring</span> <span class=n>parameters</span> <span class=k>for</span> <span class=n>eth3</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>Pre</span><span class=o>-</span><span class=n>set</span> <span class=n>maximums</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>RX</span><span class=p>:</span>             <span class=mi>4096</span>
</span></span><span class=line><span class=cl><span class=n>RX</span> <span class=n>Mini</span><span class=p>:</span>        <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>RX</span> <span class=n>Jumbo</span><span class=p>:</span>       <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>TX</span><span class=p>:</span>             <span class=mi>4096</span>
</span></span><span class=line><span class=cl><span class=n>Current</span> <span class=n>hardware</span> <span class=n>settings</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>RX</span><span class=p>:</span>             <span class=mi>512</span>
</span></span><span class=line><span class=cl><span class=n>RX</span> <span class=n>Mini</span><span class=p>:</span>        <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>RX</span> <span class=n>Jumbo</span><span class=p>:</span>       <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>TX</span><span class=p>:</span>             <span class=mi>512</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ—å‡ºä¿¡æ¯è¾ƒå¤šï¼ŒåŒ…å«ç½‘å¡çš„ç»Ÿè®¡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸¢åŒ…é‡ä¿¡æ¯</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=mi>103</span><span class=o>-</span><span class=mi>17</span><span class=o>-</span><span class=mi>164</span><span class=o>-</span><span class=n>sh</span><span class=o>-</span><span class=mi>100</span><span class=o>-</span><span class=n>k07</span> <span class=o>~</span><span class=p>]</span><span class=c1># ethtool -S eth3 | more</span>
</span></span><span class=line><span class=cl><span class=n>NIC</span> <span class=n>statistics</span><span class=p>:</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_packets</span><span class=p>:</span> <span class=mi>680955795162</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_packets</span><span class=p>:</span> <span class=mi>27260701850</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_bytes</span><span class=p>:</span> <span class=mi>248285654162670</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_bytes</span><span class=p>:</span> <span class=mi>195321924245892</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_pkts_nic</span><span class=p>:</span> <span class=mi>683081802539</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_pkts_nic</span><span class=p>:</span> <span class=mi>27260700665</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_bytes_nic</span><span class=p>:</span> <span class=mi>251132784690871</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_bytes_nic</span><span class=p>:</span> <span class=mi>195447730645152</span>
</span></span><span class=line><span class=cl>     <span class=n>lsc_int</span><span class=p>:</span> <span class=mi>11</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_busy</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>non_eop_descs</span><span class=p>:</span> <span class=mi>1811095697</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_errors</span><span class=p>:</span> <span class=mi>67381</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_dropped</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_dropped</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>multicast</span><span class=p>:</span> <span class=mi>1025690658</span>
</span></span><span class=line><span class=cl>     <span class=n>broadcast</span><span class=p>:</span> <span class=mi>206937242</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_no_buffer_count</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>collisions</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_over_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_crc_errors</span><span class=p>:</span> <span class=mi>67302</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_frame_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>hw_rsc_aggregated</span><span class=p>:</span> <span class=mi>2358414213</span>
</span></span><span class=line><span class=cl>     <span class=n>hw_rsc_flushed</span><span class=p>:</span> <span class=mi>232402327</span>
</span></span><span class=line><span class=cl>     <span class=n>fdir_match</span><span class=p>:</span> <span class=mi>10634169417</span>
</span></span><span class=line><span class=cl>     <span class=n>fdir_miss</span><span class=p>:</span> <span class=mi>669277016191</span>
</span></span><span class=line><span class=cl>     <span class=n>fdir_overflow</span><span class=p>:</span> <span class=mi>3321</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_fifo_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_missed_errors</span><span class=p>:</span> <span class=mi>2538</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_aborted_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_carrier_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_fifo_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_heartbeat_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_timeout_count</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_restart_queue</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_long_length_errors</span><span class=p>:</span> <span class=mi>80264</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_short_length_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_flow_control_xon</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_flow_control_xon</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>tx_flow_control_xoff</span><span class=p>:</span> <span class=mi>51</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_flow_control_xoff</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_csum_offload_errors</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>alloc_rx_page_failed</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>alloc_rx_buff_failed</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>rx_no_dma_resources</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>os2bmc_rx_by_bmc</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>os2bmc_tx_by_bmc</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>os2bmc_tx_by_host</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>     <span class=n>os2bmc_rx_by_host</span><span class=p>:</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹ç½‘å¡å¤šé˜Ÿåˆ—çš„æ”¯æŒæƒ…å†µï¼Œå½“å‰ç½‘å¡æ”¯æŒ8ä¸ªé˜Ÿåˆ—ï¼Œä½¿ç”¨äº†8ä¸ªé˜Ÿåˆ—</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=mi>103</span><span class=o>-</span><span class=mi>17</span><span class=o>-</span><span class=mi>6</span><span class=o>-</span><span class=n>sh</span><span class=o>-</span><span class=mi>100</span><span class=o>-</span><span class=n>j11</span> <span class=o>~</span><span class=p>]</span><span class=c1># ethtool -l eth0</span>
</span></span><span class=line><span class=cl><span class=n>Channel</span> <span class=n>parameters</span> <span class=k>for</span> <span class=n>eth0</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>Pre</span><span class=o>-</span><span class=n>set</span> <span class=n>maximums</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>RX</span><span class=p>:</span>             <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>TX</span><span class=p>:</span>             <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>Other</span><span class=p>:</span>          <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Combined</span><span class=p>:</span>       <span class=mi>8</span>
</span></span><span class=line><span class=cl><span class=n>Current</span> <span class=n>hardware</span> <span class=n>settings</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>RX</span><span class=p>:</span>             <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>TX</span><span class=p>:</span>             <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>Other</span><span class=p>:</span>          <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Combined</span><span class=p>:</span>       <span class=mi>8</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># è®¾ç½®ç½‘å¡å½“å‰ä½¿ç”¨çš„å¤šé˜Ÿåˆ—ï¼Œå½“å‰ä½¿ç”¨çš„ç½‘å¡æ•°é‡ä¸èƒ½è¶…è¿‡æœ€å¤§å€¼8ï¼Œè¯¥å€¼è·Ÿç½‘å¡çš„ä¸­æ–­æ•°é‡ä¸€ä¸€å¯¹åº”ï¼Œå³/proc/interruptsä¸­çœ‹åˆ°çš„eth0çš„ä¸­æ–­æ•°é‡</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=mi>103</span><span class=o>-</span><span class=mi>17</span><span class=o>-</span><span class=mi>6</span><span class=o>-</span><span class=n>sh</span><span class=o>-</span><span class=mi>100</span><span class=o>-</span><span class=n>j11</span> <span class=o>~</span><span class=p>]</span><span class=c1># ethtool -L eth0 combined 2</span>
</span></span><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=mi>103</span><span class=o>-</span><span class=mi>17</span><span class=o>-</span><span class=mi>6</span><span class=o>-</span><span class=n>sh</span><span class=o>-</span><span class=mi>100</span><span class=o>-</span><span class=n>j11</span> <span class=o>~</span><span class=p>]</span><span class=c1># ethtool -l eth0</span>
</span></span><span class=line><span class=cl><span class=n>Channel</span> <span class=n>parameters</span> <span class=k>for</span> <span class=n>eth0</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>Pre</span><span class=o>-</span><span class=n>set</span> <span class=n>maximums</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>RX</span><span class=p>:</span>             <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>TX</span><span class=p>:</span>             <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>Other</span><span class=p>:</span>          <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Combined</span><span class=p>:</span>       <span class=mi>8</span>
</span></span><span class=line><span class=cl><span class=n>Current</span> <span class=n>hardware</span> <span class=n>settings</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=n>RX</span><span class=p>:</span>             <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>TX</span><span class=p>:</span>             <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=n>Other</span><span class=p>:</span>          <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=n>Combined</span><span class=p>:</span>       <span class=mi>2</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=sar>sar</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl># åˆ—å‡ºç½‘å¡çš„æ¥æ”¶åŒ…ä¿¡æ¯ï¼Œæ¯”iftopæ›´ç›´è§‚
</span></span><span class=line><span class=cl>[root@103-17-164-sh-100-k07 ~]# sar -n DEV 1
</span></span><span class=line><span class=cl>Linux 3.10.0-327.10.1.el7.x86_64 (103-17-164-sh-100-k07.yidian.com)     09/09/2017      _x86_64_        (4 CPU)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>05:06:12 PM     IFACE   rxpck/s   txpck/s    rxkB/s    txkB/s   rxcmp/s   txcmp/s  rxmcst/s
</span></span><span class=line><span class=cl>05:06:13 PM      eth0      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span><span class=line><span class=cl>05:06:13 PM      eth1      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span><span class=line><span class=cl>05:06:13 PM      eth2      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span><span class=line><span class=cl>05:06:13 PM      eth3  77893.00   4328.00  31413.92  30134.16      0.00      0.00     46.00
</span></span><span class=line><span class=cl>05:06:13 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># å¯åˆ—å‡ºé”™è¯¯åŒ…çš„ç›¸å…³ä¿¡æ¯
</span></span><span class=line><span class=cl>[root@103-17-164-sh-100-k07 ~]# sar -n EDEV 1
</span></span><span class=line><span class=cl>Linux 3.10.0-327.10.1.el7.x86_64 (103-17-164-sh-100-k07.yidian.com)     09/09/2017      _x86_64_        (4 CPU)
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>05:07:13 PM     IFACE   rxerr/s   txerr/s    coll/s  rxdrop/s  txdrop/s  txcarr/s  rxfram/s  rxfifo/s  txfifo/s
</span></span><span class=line><span class=cl>05:07:14 PM      eth0      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span><span class=line><span class=cl>05:07:14 PM      eth1      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span><span class=line><span class=cl>05:07:14 PM      eth2      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span><span class=line><span class=cl>05:07:14 PM      eth3      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span><span class=line><span class=cl>05:07:14 PM        lo      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00      0.00
</span></span></code></pre></td></tr></table></div></div><p>é€šè¿‡ä¸­æ–­å¯ä»¥çœ‹åˆ°ç½‘å¡åŒ…å«å››ä¸ªä¸­æ–­55-58ï¼Œå‡ä½äºcpu0ä¸Šã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@103-17-164-sh-100-k07 ~]# cat /proc/interrupts
</span></span><span class=line><span class=cl>           CPU0       CPU1       CPU2       CPU3
</span></span><span class=line><span class=cl>  0:         44          0          0          0  IR-IO-APIC-edge      timer
</span></span><span class=line><span class=cl>  1:          3          0          0          0  IR-IO-APIC-edge      i8042
</span></span><span class=line><span class=cl>  8:         42          0          0          0  IR-IO-APIC-edge      rtc0
</span></span><span class=line><span class=cl>  9:          1          0          0          0  IR-IO-APIC-fasteoi   acpi
</span></span><span class=line><span class=cl> 12:          4          0          0          0  IR-IO-APIC-edge      i8042
</span></span><span class=line><span class=cl> 16:         99          0          0          0  IR-IO-APIC-fasteoi   ehci_hcd:usb1
</span></span><span class=line><span class=cl> 18:          0          0          0          0  IR-IO-APIC-fasteoi   i801_smbus
</span></span><span class=line><span class=cl> 23:         83          0          0          0  IR-IO-APIC-fasteoi   ehci_hcd:usb2
</span></span><span class=line><span class=cl> 37:   12019917          0          0          0  IR-PCI-MSI-edge      0000:00:1f.2
</span></span><span class=line><span class=cl> 48:          0          0          0          0  DMAR_MSI-edge      dmar0
</span></span><span class=line><span class=cl> 55:  746827548          0          0          0  IR-PCI-MSI-edge      eth3-TxRx-0
</span></span><span class=line><span class=cl> 56: 2674693551          0          0          0  IR-PCI-MSI-edge      eth3-TxRx-1
</span></span><span class=line><span class=cl> 57: 2341522223          0          0          0  IR-PCI-MSI-edge      eth3-TxRx-2
</span></span><span class=line><span class=cl> 58: 3587929355          0          0          0  IR-PCI-MSI-edge      eth3-TxRx-3
</span></span><span class=line><span class=cl> 59:       3334          0          0          0  IR-PCI-MSI-edge      eth3
</span></span><span class=line><span class=cl> 61:          2          0          0          0  IR-PCI-MSI-edge      ioat-msix
</span></span><span class=line><span class=cl> 63:          2          0          0          0  IR-PCI-MSI-edge      ioat-msix
</span></span><span class=line><span class=cl> 64:          2          0          0          0  IR-PCI-MSI-edge      ioat-msix
</span></span><span class=line><span class=cl> 65:          2          0          0          0  IR-PCI-MSI-edge      ioat-msix
</span></span><span class=line><span class=cl> 66:          2          0          0          0  IR-PCI-MSI-edge      ioat-msix
</span></span><span class=line><span class=cl> 67:          2          0          0          0  IR-PCI-MSI-edge      ioat-msix
</span></span><span class=line><span class=cl> 68:          2          0          0          0  IR-PCI-MSI-edge      ioat-msix
</span></span><span class=line><span class=cl> 69:          2          0          0          0  IR-PCI-MSI-edge      ioat-msix
</span></span><span class=line><span class=cl>NMI:    1100069     693493     635982     615953   Non-maskable interrupts
</span></span><span class=line><span class=cl>LOC: 1120358899  146726541 4134846029  168005659   Local timer interrupts
</span></span><span class=line><span class=cl>SPU:          0          0          0          0   Spurious interrupts
</span></span><span class=line><span class=cl>PMI:    1100069     693493     635982     615953   Performance monitoring interrupts
</span></span><span class=line><span class=cl>IWI:   57255892  115292160  113458706  112987848   IRQ work interrupts
</span></span><span class=line><span class=cl>RTR:          0          0          0          0   APIC ICR read retries
</span></span><span class=line><span class=cl>RES:  525229423 2791640970  427214674 1986396041   Rescheduling interrupts
</span></span><span class=line><span class=cl>CAL: 4294536344 4294488238 4294478163 4294552026   Function call interrupts
</span></span><span class=line><span class=cl>TLB:   65239533   57937650   55104990   52690662   TLB shootdowns
</span></span><span class=line><span class=cl>TRM:          0          0          0          0   Thermal event interrupts
</span></span><span class=line><span class=cl>THR:          0          0          0          0   Threshold APIC interrupts
</span></span><span class=line><span class=cl>MCE:          0          0          0          0   Machine check exceptions
</span></span><span class=line><span class=cl>MCP:     160132     160132     160132     160132   Machine check polls
</span></span><span class=line><span class=cl>ERR:          0
</span></span><span class=line><span class=cl>MIS:          0
</span></span></code></pre></td></tr></table></div></div><h2 id=ä¿®æ”¹ä¸­æ–­çš„cpuåˆ†é…>ä¿®æ”¹ä¸­æ–­çš„cpuåˆ†é…</h2><p>echo &ldquo;2&rdquo; > /proc/irq/49/smp_affinity</p><p>å…¶ä¸­2è¡¨ç¤ºcpu1, 49è¡¨ç¤ºä¸­æ–­å·ã€‚</p><h2 id=æŸ¥çœ‹è½¯ä¸­æ–­>æŸ¥çœ‹è½¯ä¸­æ–­</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>[root@120-14-31-SH-1037-B07 ~]# cat /proc/softirqs
</span></span><span class=line><span class=cl>                    CPU0       CPU1       CPU2       CPU3
</span></span><span class=line><span class=cl>          HI:          1          3          0          1
</span></span><span class=line><span class=cl>       TIMER: 1795378091 3617740778 2674553229 1524071492
</span></span><span class=line><span class=cl>      NET_TX:  202188392   22218135   17427628   17205883
</span></span><span class=line><span class=cl>      NET_RX: 3388060179   60871361   68145291   38670323
</span></span><span class=line><span class=cl>       BLOCK:    4741950       2422       1309       1489
</span></span><span class=line><span class=cl>BLOCK_IOPOLL:          0          0          0          0
</span></span><span class=line><span class=cl>     TASKLET: 2102131738    3720214    3104944    1942912
</span></span><span class=line><span class=cl>       SCHED:  526046585  612421231  496815061  456047989
</span></span><span class=line><span class=cl>     HRTIMER:          0          0          0          0
</span></span><span class=line><span class=cl>         RCU: 3147020579 4237695975 3820083676 3267816268
</span></span></code></pre></td></tr></table></div></div><p>è½¯ä¸­æ–­åŒ…æ‹¬10ä¸ªç±»åˆ«ï¼ŒNET_RXï¼ˆç½‘ç»œæ¥æ”¶ä¸­æ–­ï¼‰ã€NET_TXï¼ˆç½‘ç»œå‘é€ä¸­æ–­ï¼‰</p><h2 id=æŸ¥çœ‹æ•°æ®åŒ…ç»Ÿè®¡>æŸ¥çœ‹æ•°æ®åŒ…ç»Ÿè®¡</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>  1
</span><span class=lnt>  2
</span><span class=lnt>  3
</span><span class=lnt>  4
</span><span class=lnt>  5
</span><span class=lnt>  6
</span><span class=lnt>  7
</span><span class=lnt>  8
</span><span class=lnt>  9
</span><span class=lnt> 10
</span><span class=lnt> 11
</span><span class=lnt> 12
</span><span class=lnt> 13
</span><span class=lnt> 14
</span><span class=lnt> 15
</span><span class=lnt> 16
</span><span class=lnt> 17
</span><span class=lnt> 18
</span><span class=lnt> 19
</span><span class=lnt> 20
</span><span class=lnt> 21
</span><span class=lnt> 22
</span><span class=lnt> 23
</span><span class=lnt> 24
</span><span class=lnt> 25
</span><span class=lnt> 26
</span><span class=lnt> 27
</span><span class=lnt> 28
</span><span class=lnt> 29
</span><span class=lnt> 30
</span><span class=lnt> 31
</span><span class=lnt> 32
</span><span class=lnt> 33
</span><span class=lnt> 34
</span><span class=lnt> 35
</span><span class=lnt> 36
</span><span class=lnt> 37
</span><span class=lnt> 38
</span><span class=lnt> 39
</span><span class=lnt> 40
</span><span class=lnt> 41
</span><span class=lnt> 42
</span><span class=lnt> 43
</span><span class=lnt> 44
</span><span class=lnt> 45
</span><span class=lnt> 46
</span><span class=lnt> 47
</span><span class=lnt> 48
</span><span class=lnt> 49
</span><span class=lnt> 50
</span><span class=lnt> 51
</span><span class=lnt> 52
</span><span class=lnt> 53
</span><span class=lnt> 54
</span><span class=lnt> 55
</span><span class=lnt> 56
</span><span class=lnt> 57
</span><span class=lnt> 58
</span><span class=lnt> 59
</span><span class=lnt> 60
</span><span class=lnt> 61
</span><span class=lnt> 62
</span><span class=lnt> 63
</span><span class=lnt> 64
</span><span class=lnt> 65
</span><span class=lnt> 66
</span><span class=lnt> 67
</span><span class=lnt> 68
</span><span class=lnt> 69
</span><span class=lnt> 70
</span><span class=lnt> 71
</span><span class=lnt> 72
</span><span class=lnt> 73
</span><span class=lnt> 74
</span><span class=lnt> 75
</span><span class=lnt> 76
</span><span class=lnt> 77
</span><span class=lnt> 78
</span><span class=lnt> 79
</span><span class=lnt> 80
</span><span class=lnt> 81
</span><span class=lnt> 82
</span><span class=lnt> 83
</span><span class=lnt> 84
</span><span class=lnt> 85
</span><span class=lnt> 86
</span><span class=lnt> 87
</span><span class=lnt> 88
</span><span class=lnt> 89
</span><span class=lnt> 90
</span><span class=lnt> 91
</span><span class=lnt> 92
</span><span class=lnt> 93
</span><span class=lnt> 94
</span><span class=lnt> 95
</span><span class=lnt> 96
</span><span class=lnt> 97
</span><span class=lnt> 98
</span><span class=lnt> 99
</span><span class=lnt>100
</span><span class=lnt>101
</span><span class=lnt>102
</span><span class=lnt>103
</span><span class=lnt>104
</span><span class=lnt>105
</span><span class=lnt>106
</span><span class=lnt>107
</span><span class=lnt>108
</span><span class=lnt>109
</span><span class=lnt>110
</span><span class=lnt>111
</span><span class=lnt>112
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=p>[</span><span class=n>root</span><span class=err>@</span><span class=n>c1</span><span class=o>-</span><span class=n>g08</span><span class=o>-</span><span class=mi>120</span><span class=o>-</span><span class=mi>166</span><span class=o>-</span><span class=mi>30</span> <span class=o>~</span><span class=p>]</span><span class=c1># netstat -s</span>
</span></span><span class=line><span class=cl><span class=n>Ip</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=mi>7586513384</span> <span class=n>total</span> <span class=n>packets</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=n>forwarded</span>
</span></span><span class=line><span class=cl>    <span class=mi>741</span> <span class=n>with</span> <span class=n>unknown</span> <span class=n>protocol</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=n>incoming</span> <span class=n>packets</span> <span class=n>discarded</span>
</span></span><span class=line><span class=cl>    <span class=mi>7586512643</span> <span class=n>incoming</span> <span class=n>packets</span> <span class=n>delivered</span>
</span></span><span class=line><span class=cl>    <span class=mi>7948370396</span> <span class=n>requests</span> <span class=n>sent</span> <span class=n>out</span>
</span></span><span class=line><span class=cl><span class=n>Icmp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=mi>23</span> <span class=n>ICMP</span> <span class=n>messages</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=n>input</span> <span class=n>ICMP</span> <span class=n>message</span> <span class=n>failed</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=n>ICMP</span> <span class=n>input</span> <span class=n>histogram</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>destination</span> <span class=n>unreachable</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>echo</span> <span class=n>requests</span><span class=p>:</span> <span class=mi>19</span>
</span></span><span class=line><span class=cl>        <span class=n>echo</span> <span class=n>replies</span><span class=p>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>    <span class=mi>46</span> <span class=n>ICMP</span> <span class=n>messages</span> <span class=n>sent</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=n>ICMP</span> <span class=n>messages</span> <span class=n>failed</span>
</span></span><span class=line><span class=cl>    <span class=n>ICMP</span> <span class=n>output</span> <span class=n>histogram</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>destination</span> <span class=n>unreachable</span><span class=p>:</span> <span class=mi>9</span>
</span></span><span class=line><span class=cl>        <span class=n>echo</span> <span class=n>request</span><span class=p>:</span> <span class=mi>18</span>
</span></span><span class=line><span class=cl>        <span class=n>echo</span> <span class=n>replies</span><span class=p>:</span> <span class=mi>19</span>
</span></span><span class=line><span class=cl><span class=n>IcmpMsg</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>InType0</span><span class=p>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl>        <span class=n>InType3</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=n>InType8</span><span class=p>:</span> <span class=mi>19</span>
</span></span><span class=line><span class=cl>        <span class=n>OutType0</span><span class=p>:</span> <span class=mi>19</span>
</span></span><span class=line><span class=cl>        <span class=n>OutType3</span><span class=p>:</span> <span class=mi>9</span>
</span></span><span class=line><span class=cl>        <span class=n>OutType8</span><span class=p>:</span> <span class=mi>18</span>
</span></span><span class=line><span class=cl><span class=n>Tcp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=mi>561299810</span> <span class=n>active</span> <span class=n>connections</span> <span class=n>openings</span>
</span></span><span class=line><span class=cl>    <span class=mi>2005002</span> <span class=n>passive</span> <span class=n>connection</span> <span class=n>openings</span>
</span></span><span class=line><span class=cl>    <span class=mi>8</span> <span class=n>failed</span> <span class=n>connection</span> <span class=n>attempts</span>
</span></span><span class=line><span class=cl>    <span class=mi>282644949</span> <span class=n>connection</span> <span class=n>resets</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>725</span> <span class=n>connections</span> <span class=n>established</span>
</span></span><span class=line><span class=cl>    <span class=mi>7585817181</span> <span class=n>segments</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>13957880471</span> <span class=n>segments</span> <span class=n>send</span> <span class=n>out</span>
</span></span><span class=line><span class=cl>    <span class=mi>1742807</span> <span class=n>segments</span> <span class=n>retransmited</span>
</span></span><span class=line><span class=cl>    <span class=mi>136</span> <span class=n>bad</span> <span class=n>segments</span> <span class=n>received</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=mi>523811266</span> <span class=n>resets</span> <span class=n>sent</span>
</span></span><span class=line><span class=cl><span class=n>Udp</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=mi>445457</span> <span class=n>packets</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>3</span> <span class=n>packets</span> <span class=n>to</span> <span class=n>unknown</span> <span class=n>port</span> <span class=n>received</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=n>packet</span> <span class=n>receive</span> <span class=n>errors</span>
</span></span><span class=line><span class=cl>    <span class=mi>553840367</span> <span class=n>packets</span> <span class=n>sent</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=n>receive</span> <span class=n>buffer</span> <span class=n>errors</span>
</span></span><span class=line><span class=cl>    <span class=mi>0</span> <span class=n>send</span> <span class=n>buffer</span> <span class=n>errors</span>
</span></span><span class=line><span class=cl><span class=n>UdpLite</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>InErrors</span><span class=p>:</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=n>TcpExt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=mi>341304</span> <span class=n>invalid</span> <span class=n>SYN</span> <span class=n>cookies</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span> <span class=n>resets</span> <span class=n>received</span> <span class=k>for</span> <span class=n>embryonic</span> <span class=n>SYN_RECV</span> <span class=n>sockets</span>
</span></span><span class=line><span class=cl>    <span class=mi>1</span> <span class=n>ICMP</span> <span class=n>packets</span> <span class=n>dropped</span> <span class=n>because</span> <span class=n>they</span> <span class=n>were</span> <span class=n>out</span><span class=o>-</span><span class=n>of</span><span class=o>-</span><span class=n>window</span>
</span></span><span class=line><span class=cl>    <span class=mi>1997421</span> <span class=n>TCP</span> <span class=n>sockets</span> <span class=n>finished</span> <span class=n>time</span> <span class=n>wait</span> <span class=ow>in</span> <span class=n>fast</span> <span class=n>timer</span>
</span></span><span class=line><span class=cl>    <span class=mi>222787</span> <span class=n>delayed</span> <span class=n>acks</span> <span class=n>sent</span>
</span></span><span class=line><span class=cl>    <span class=mi>1819</span> <span class=n>delayed</span> <span class=n>acks</span> <span class=n>further</span> <span class=n>delayed</span> <span class=n>because</span> <span class=n>of</span> <span class=n>locked</span> <span class=n>socket</span>
</span></span><span class=line><span class=cl>    <span class=n>Quick</span> <span class=n>ack</span> <span class=n>mode</span> <span class=n>was</span> <span class=n>activated</span> <span class=mi>178186</span> <span class=n>times</span>
</span></span><span class=line><span class=cl>    <span class=mi>13</span> <span class=n>packets</span> <span class=n>directly</span> <span class=n>queued</span> <span class=n>to</span> <span class=n>recvmsg</span> <span class=n>prequeue</span><span class=o>.</span>
</span></span><span class=line><span class=cl>    <span class=mi>3280604069</span> <span class=n>packet</span> <span class=n>headers</span> <span class=n>predicted</span>
</span></span><span class=line><span class=cl>    <span class=mi>1972740996</span> <span class=n>acknowledgments</span> <span class=ow>not</span> <span class=n>containing</span> <span class=n>data</span> <span class=n>payload</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>798190042</span> <span class=n>predicted</span> <span class=n>acknowledgments</span>
</span></span><span class=line><span class=cl>    <span class=mi>642444</span> <span class=n>times</span> <span class=n>recovered</span> <span class=n>from</span> <span class=n>packet</span> <span class=n>loss</span> <span class=n>by</span> <span class=n>selective</span> <span class=n>acknowledgements</span>
</span></span><span class=line><span class=cl>    <span class=n>Detected</span> <span class=n>reordering</span> <span class=mi>23</span> <span class=n>times</span> <span class=n>using</span> <span class=n>FACK</span>
</span></span><span class=line><span class=cl>    <span class=n>Detected</span> <span class=n>reordering</span> <span class=mi>1618</span> <span class=n>times</span> <span class=n>using</span> <span class=n>SACK</span>
</span></span><span class=line><span class=cl>    <span class=mi>59</span> <span class=n>congestion</span> <span class=n>windows</span> <span class=n>fully</span> <span class=n>recovered</span> <span class=n>without</span> <span class=n>slow</span> <span class=n>start</span>
</span></span><span class=line><span class=cl>    <span class=mi>16</span> <span class=n>congestion</span> <span class=n>windows</span> <span class=n>partially</span> <span class=n>recovered</span> <span class=n>using</span> <span class=n>Hoe</span> <span class=n>heuristic</span>
</span></span><span class=line><span class=cl>    <span class=mi>17089</span> <span class=n>congestion</span> <span class=n>windows</span> <span class=n>recovered</span> <span class=n>without</span> <span class=n>slow</span> <span class=n>start</span> <span class=n>by</span> <span class=n>DSACK</span>
</span></span><span class=line><span class=cl>    <span class=mi>9594</span> <span class=n>congestion</span> <span class=n>windows</span> <span class=n>recovered</span> <span class=n>without</span> <span class=n>slow</span> <span class=n>start</span> <span class=n>after</span> <span class=n>partial</span> <span class=n>ack</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPLostRetransmit</span><span class=p>:</span> <span class=mi>2849</span>
</span></span><span class=line><span class=cl>    <span class=mi>4926</span> <span class=n>timeouts</span> <span class=n>after</span> <span class=n>SACK</span> <span class=n>recovery</span>
</span></span><span class=line><span class=cl>    <span class=mi>672451</span> <span class=n>fast</span> <span class=n>retransmits</span>
</span></span><span class=line><span class=cl>    <span class=mi>28946</span> <span class=n>forward</span> <span class=n>retransmits</span>
</span></span><span class=line><span class=cl>    <span class=mi>680</span> <span class=n>retransmits</span> <span class=ow>in</span> <span class=n>slow</span> <span class=n>start</span>
</span></span><span class=line><span class=cl>    <span class=mi>5024</span> <span class=n>other</span> <span class=n>TCP</span> <span class=n>timeouts</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPLossProbes</span><span class=p>:</span> <span class=mi>1390602</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPLossProbeRecovery</span><span class=p>:</span> <span class=mi>997235</span>
</span></span><span class=line><span class=cl>    <span class=mi>4723</span> <span class=n>SACK</span> <span class=n>retransmits</span> <span class=n>failed</span>
</span></span><span class=line><span class=cl>    <span class=mi>178189</span> <span class=n>DSACKs</span> <span class=n>sent</span> <span class=k>for</span> <span class=n>old</span> <span class=n>packets</span>
</span></span><span class=line><span class=cl>    <span class=mi>979863</span> <span class=n>DSACKs</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>62</span> <span class=n>DSACKs</span> <span class=k>for</span> <span class=n>out</span> <span class=n>of</span> <span class=n>order</span> <span class=n>packets</span> <span class=n>received</span>
</span></span><span class=line><span class=cl>    <span class=mi>282645553</span> <span class=n>connections</span> <span class=n>reset</span> <span class=n>due</span> <span class=n>to</span> <span class=n>unexpected</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>    <span class=mi>9</span> <span class=n>connections</span> <span class=n>reset</span> <span class=n>due</span> <span class=n>to</span> <span class=n>early</span> <span class=n>user</span> <span class=n>close</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPDSACKIgnoredNoUndo</span><span class=p>:</span> <span class=mi>936061</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPSpuriousRTOs</span><span class=p>:</span> <span class=mi>5150</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPSackShifted</span><span class=p>:</span> <span class=mi>233309</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPSackMerged</span><span class=p>:</span> <span class=mi>733778</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPSackShiftFallback</span><span class=p>:</span> <span class=mi>1768422</span>
</span></span><span class=line><span class=cl>    <span class=n>IPReversePathFilter</span><span class=p>:</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPRetransFail</span><span class=p>:</span> <span class=mi>11</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPRcvCoalesce</span><span class=p>:</span> <span class=mi>1290965687</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPOFOQueue</span><span class=p>:</span> <span class=mi>1753072</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPChallengeACK</span><span class=p>:</span> <span class=mi>136</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPSYNChallenge</span><span class=p>:</span> <span class=mi>136</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPSpuriousRtxHostQueues</span><span class=p>:</span> <span class=mi>73</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPAutoCorking</span><span class=p>:</span> <span class=mi>272452106</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPSynRetrans</span><span class=p>:</span> <span class=mi>4538</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPOrigDataSent</span><span class=p>:</span> <span class=mi>9260789170</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPHystartTrainDetect</span><span class=p>:</span> <span class=mi>3721895</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPHystartTrainCwnd</span><span class=p>:</span> <span class=mi>64417412</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPHystartDelayDetect</span><span class=p>:</span> <span class=mi>80</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPHystartDelayCwnd</span><span class=p>:</span> <span class=mi>2579</span>
</span></span><span class=line><span class=cl>    <span class=n>TCPACKSkippedSynRecv</span><span class=p>:</span> <span class=mi>4</span>
</span></span><span class=line><span class=cl><span class=n>IpExt</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>InMcastPkts</span><span class=p>:</span> <span class=mi>249744</span>
</span></span><span class=line><span class=cl>    <span class=n>OutMcastPkts</span><span class=p>:</span> <span class=mi>83317</span>
</span></span><span class=line><span class=cl>    <span class=n>InBcastPkts</span><span class=p>:</span> <span class=mi>226</span>
</span></span><span class=line><span class=cl>    <span class=n>InOctets</span><span class=p>:</span> <span class=mi>12312144006244</span>
</span></span><span class=line><span class=cl>    <span class=n>OutOctets</span><span class=p>:</span> <span class=mi>12449967070063</span>
</span></span><span class=line><span class=cl>    <span class=n>InMcastOctets</span><span class=p>:</span> <span class=mi>22309104</span>
</span></span><span class=line><span class=cl>    <span class=n>OutMcastOctets</span><span class=p>:</span> <span class=mi>9664620</span>
</span></span><span class=line><span class=cl>    <span class=n>InBcastOctets</span><span class=p>:</span> <span class=mi>104240</span>
</span></span><span class=line><span class=cl>    <span class=n>InNoECTPkts</span><span class=p>:</span> <span class=mi>7586513474</span>
</span></span><span class=line><span class=cl>    <span class=n>InECT0Pkts</span><span class=p>:</span> <span class=mi>47</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=irqbalance>irqbalance</h1><p>æŸ¥çœ‹æ˜¯å¦è¿è¡Œï¼šsystemctl status irqbalance</p><p>irqbalanceæ ¹æ®ç³»ç»Ÿä¸­æ–­è´Ÿè½½çš„æƒ…å†µï¼Œè‡ªåŠ¨è¿ç§»ä¸­æ–­ä¿æŒä¸­æ–­çš„å¹³è¡¡ï¼ŒåŒæ—¶ä¼šè€ƒè™‘åˆ°çœç”µå› ç´ ç­‰ç­‰ã€‚ ä½†æ˜¯åœ¨å®æ—¶ç³»ç»Ÿä¸­ä¼šå¯¼è‡´ä¸­æ–­è‡ªåŠ¨æ¼‚ç§»ï¼Œå¯¹æ€§èƒ½é€ æˆä¸ç¨³å®šå› ç´ ï¼Œåœ¨é«˜æ€§èƒ½çš„åœºåˆå»ºè®®å…³é—­ã€‚</p><p>irqbalanceç”¨äºä¼˜åŒ–ä¸­æ–­åˆ†é…ï¼Œå®ƒä¼šè‡ªåŠ¨æ”¶é›†ç³»ç»Ÿæ•°æ®ä»¥åˆ†æä½¿ç”¨æ¨¡å¼ï¼Œå¹¶ä¾æ®ç³»ç»Ÿè´Ÿè½½çŠ¶å†µå°†å·¥ä½œçŠ¶æ€ç½®äº Performance mode æˆ– Power-save modeã€‚å¤„äºPerformance mode æ—¶ï¼Œirqbalance ä¼šå°†ä¸­æ–­å°½å¯èƒ½å‡åŒ€åœ°åˆ†å‘ç»™å„ä¸ª CPU coreï¼Œä»¥å……åˆ†åˆ©ç”¨ CPU å¤šæ ¸ï¼Œæå‡æ€§èƒ½ã€‚
å¤„äºPower-save mode æ—¶ï¼Œirqbalance ä¼šå°†ä¸­æ–­é›†ä¸­åˆ†é…ç»™ç¬¬ä¸€ä¸ª CPUï¼Œä»¥ä¿è¯å…¶å®ƒç©ºé—² CPU çš„ç¡çœ æ—¶é—´ï¼Œé™ä½èƒ½è€—ã€‚</p><h1 id=ref>ref</h1><ul><li><a class=link href=http://www.vpsee.com/2010/07/load-balancing-with-irq-smp-affinity/ target=_blank rel=noopener>Linux å¤šæ ¸ä¸‹ç»‘å®šç¡¬ä»¶ä¸­æ–­åˆ°ä¸åŒ CPUï¼ˆIRQ Affinityï¼‰</a></li><li><a class=link href=http://blog.yufeng.info/archives/2422 target=_blank rel=noopener>æ·±åº¦å‰–æå‘Šè¯‰ä½ irqbalanceæœ‰ç”¨å—ï¼Ÿ</a></li><li><a class=link href=https://time.geekbang.org/column/article/71868 target=_blank rel=noopener>æ€ä¹ˆç†è§£Linuxè½¯ä¸­æ–­ï¼Ÿ</a></li></ul></section><footer class=article-footer></footer></article><script src=https://giscus.app/client.js data-repo=kuring/kuring.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkyODM4MzQ0NTk=" data-category=Announcements data-category-id=DIC_kwDOEOr4W84CdeTU data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=light data-lang=zh-CN data-loading crossorigin=anonymous async></script><script>function setGiscusTheme(e){let t=document.querySelector("iframe.giscus-frame");t&&t.contentWindow.postMessage({giscus:{setConfig:{theme:e}}},"https://giscus.app")}(function(){addEventListener("message",t=>{if(event.origin!=="https://giscus.app")return;e()}),window.addEventListener("onColorSchemeChange",e);function e(){setGiscusTheme(document.documentElement.dataset.scheme==="light"?"light":"dark")}})()</script><footer class=site-footer><section class=copyright>&copy;
2013 -
2025 kuring</section><section class=powerby>ä½¿ç”¨ <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a> æ„å»º<br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.33.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.c922af694cc257bf1ecc41c0dd7b0430f9114ec280ccf67cd2c6ad55f5316c4e.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>