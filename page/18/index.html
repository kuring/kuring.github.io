<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"kuring.me","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.18.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="404频道">
<meta property="og:url" content="http://kuring.me/page/18/index.html">
<meta property="og:site_name" content="404频道">
<meta property="og:locale">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://kuring.me/page/18/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-Hans","comments":"","permalink":"","path":"page/18/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>404频道</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">404频道</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学习笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">229</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/kuring" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kuring" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_change_netcardname/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/linux_change_netcardname/" class="post-title-link" itemprop="url">Linux更改网卡名称</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-05-02 00:00:00" itemprop="dateCreated datePublished" datetime="2014-05-02T00:00:00+00:00">2014-05-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本实验为在虚拟机环境中实验，操作系统为Red Hat Enterprise6.0 32位，当前网卡列表如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]# ifconfig </span><br><span class="line">eth1      Link encap:Ethernet  HWaddr 00:0C:29:8C:58:06  </span><br><span class="line">          inet addr:192.168.124.140  Bcast:192.168.124.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe8c:5806/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:123 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:57 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000</span><br><span class="line">          RX bytes:18770 (18.3 KiB)  TX bytes:11684 (11.4 KiB)</span><br><span class="line">          Interrupt:19 Base address:0x2024</span><br><span class="line"></span><br><span class="line">eth2      Link encap:Ethernet  HWaddr 00:50:56:3F:B3:90</span><br><span class="line">          inet addr:192.168.124.141  Bcast:192.168.124.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::250:56ff:fe3f:b390/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:111 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:43 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000</span><br><span class="line">          RX bytes:16101 (15.7 KiB)  TX bytes:10343 (10.1 KiB)</span><br><span class="line">          Interrupt:19 Base address:0x20a4</span><br></pre></td></tr></table></figure>

<p>目的为将网卡eth1更改为eth0，将eth2更改为eth3。</p>
<h1 id="修改grub-conf文件"><a href="#修改grub-conf文件" class="headerlink" title="修改grub.conf文件"></a>修改grub.conf文件</h1><p>在文件中内核启动时增加_biosdevname&#x3D;0_选项。修改后的文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">default=0</span><br><span class="line">timeout=5</span><br><span class="line">splashimage=(hd0,0)/grub/splash.xpm.gz</span><br><span class="line">hiddenmenu</span><br><span class="line">title Red Hat Enterprise Linux (2.6.32-71.el6.i686)</span><br><span class="line">        root (hd0,0)</span><br><span class="line">        kernel /vmlinuz-2.6.32-71.el6.i686 ro root=/dev/mapper/VolGroup-lv_root rd_LVM_LV=VolGroup/lv_root rd_LVM_LV=VolGroup/lv_swap rd_NO_LUKS rd_NO_MD rd_NO_DM LANG=zh_CN.UTF-8 KEYBOARDTYPE=pc KEYTABLE=us nomodeset crashkernel=auto rhgb quiet biosdevname=0</span><br><span class="line">        initrd /initramfs-2.6.32-71.el6.i686.img</span><br></pre></td></tr></table></figure>

<h1 id="更改网卡配置文件内容和文件名称"><a href="#更改网卡配置文件内容和文件名称" class="headerlink" title="更改网卡配置文件内容和文件名称"></a>更改网卡配置文件内容和文件名称</h1><p>在&#x2F;etc&#x2F;sysconfig&#x2F;network-scripts目录中将原有的网卡配置文件ifcfg_Auto_eth1和ifcfg_Auto_eth2更改为ifcfg_eth0和ifcfg_eth3，同时修改文件的内容，将文件的内容中的网卡设备名称进行替换。替换后的文件ifcfg_eth0内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=yes</span><br><span class="line">IPV6INIT=no</span><br><span class="line">NAME=&quot;Auto eth0&quot;</span><br><span class="line">UUID=995d037e-3b65-4490-a1fa-f26f6abf066d</span><br><span class="line">ONBOOT=yes</span><br><span class="line">HWADDR=00:0C:29:8C:58:06</span><br><span class="line">PEERDNS=yes</span><br><span class="line">PEERROUTES=yes</span><br><span class="line">DEVICE=eth0</span><br></pre></td></tr></table></figure>

<h1 id="删除70-persistent-net-rules文件"><a href="#删除70-persistent-net-rules文件" class="headerlink" title="删除70-persistent-net.rules文件"></a>删除70-persistent-net.rules文件</h1><p>该文件存在于&#x2F;etc&#x2F;udev&#x2F;rules.d目录下。该文件如果不存在，开始时会自动创建，里面包含了网卡名称的配置信息。</p>
<hr>
<p>在修改完上述内容后重新启动机器配置就修改过来了,修改完成之后的网卡配置如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost rules.d]# ifconfig                                                                                                                  </span><br><span class="line">eth0      Link encap:Ethernet  HWaddr 00:0C:29:8C:58:06                                                                                             </span><br><span class="line">          inet addr:192.168.124.140  Bcast:192.168.124.255  Mask:255.255.255.0                                                                      </span><br><span class="line">          inet6 addr: fe80::20c:29ff:fe8c:5806/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:87 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:75 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000</span><br><span class="line">          RX bytes:17174 (16.7 KiB)  TX bytes:14520 (14.1 KiB)</span><br><span class="line">          Interrupt:19 Base address:0x2024</span><br><span class="line"></span><br><span class="line">eth3      Link encap:Ethernet  HWaddr 00:50:56:3F:B3:90</span><br><span class="line">          inet addr:192.168.124.141  Bcast:192.168.124.255  Mask:255.255.255.0</span><br><span class="line">          inet6 addr: fe80::250:56ff:fe3f:b390/64 Scope:Link</span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1</span><br><span class="line">          RX packets:72 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">          TX packets:76 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">          collisions:0 txqueuelen:1000</span><br><span class="line">          RX bytes:14164 (13.8 KiB)  TX bytes:14955 (14.6 KiB)</span><br><span class="line">          Interrupt:19 Base address:0x20a4</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/redhat_setup_base/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/redhat_setup_base/" class="post-title-link" itemprop="url">Redhat安装完成之后的设置</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-05-01 00:00:00" itemprop="dateCreated datePublished" datetime="2014-05-01T00:00:00+00:00">2014-05-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<p>＃ 安装kdevelop</p>
<p>确保可以上网，这里采用yum的安装方式进行安装。<br>首先执行命令：yum install kdevelop，会出现如下提示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Loaded plugins: rhnplugin, security</span><br><span class="line">This system is not registered with RHN.</span><br><span class="line">RHN support will be disabled.</span><br><span class="line">file:///mnt/file/rh5/Cluster/repodata/repomd.xml: [Errno 5] OSError: [Errno 2] 没有那个文件或目录: &#x27;/mnt/file/rh5/Cluster/repodata/repomd.xml&#x27;</span><br><span class="line">Trying other mirror.</span><br><span class="line">Error: Cannot retrieve repository metadata (repomd.xml) for repository: Cluster. Please verify its path and try again</span><br></pre></td></tr></table></figure>

<p>出现上述错误是由于redhat没有注册，所有不能使用它自身的源进行更新，可以更换为CentOS系统的源进行更新，操作步骤为：<br>1、进入&#x2F;etc&#x2F;yum.repos.d&#x2F;目录。在命令行输入：wget <a target="_blank" rel="noopener" href="http://docs.linuxtone.org/soft/lemp/CentOS-Base.repo%E3%80%82">http://docs.linuxtone.org/soft/lemp/CentOS-Base.repo。</a><br>2、ls 一下，会看到一个文件名为CentOS-Base.repo的文件。<br>3、将原来的文件rhel-debuginfo.repo改名为rhel-debuginfo.repo.bak。<br>4、将CentOS-Base.repo改名为rhel-debuginfo.repo</p>
<p>再次运行命令：yum install kdevelop，就可以安装kdevelop了。</p>
<p>安装过程中遇到了需要的pcre包无法从centos的源中下载的问题，解决方法为根据yum命令无法下载的包，在google中搜索，下载包然后再redhat上用rpm的升级命令来安装。具体下载网址为：<a target="_blank" rel="noopener" href="http://mirrors.stuhome.net/centos/5.9/cr/x86_64/RPMS/">电子科技大学星辰工作室开源镜像服务</a>。</p>
<p>rpm相关命令：<br>安装一个包：rpm   -ivh<br>升级一个包：rpm   -Uvh<br>移走一个包：rpm   -e </p>
<h1 id="安装konsole"><a href="#安装konsole" class="headerlink" title="安装konsole"></a>安装konsole</h1><p>安装上kdevelop后在执行程序的时候会提示<code>/bin/sh:konsole:command not found</code>。执行<code>yum install kdebase</code>命令来安装konsole。</p>
<h1 id="配置ssh服务"><a href="#配置ssh服务" class="headerlink" title="配置ssh服务"></a>配置ssh服务</h1><p>修改ssh服务的配置文件&#x2F;etc&#x2F;ssh&#x2F;sshd_config文件，将文件中的#PasswordAuthentication yes注释打开。<br>修改ssh服务的配置文件&#x2F;etc&#x2F;ssh&#x2F;sshd_config文件，将文件中的PermitRootLogin no更改为yes。这样即可以用ssh工具连接到该机器。</p>
<h1 id="xmanager连接配置"><a href="#xmanager连接配置" class="headerlink" title="xmanager连接配置"></a>xmanager连接配置</h1><p>该部分参考文档的网址为：<a target="_blank" rel="noopener" href="http://blog.csdn.net/gltyi99/article/details/6141972">http://blog.csdn.net/gltyi99/article/details/6141972</a></p>
<ol>
<li><p>修改&#x2F;usr&#x2F;share&#x2F;gdm&#x2F;defaults.conf文件的权限，默认权限为444，chmod 700 &#x2F;usr&#x2F;share&#x2F;gdm&#x2F;defaults.conf。</p>
</li>
<li><p>在&#x2F;usr&#x2F;share&#x2F;gdm&#x2F;defaults.conf文件的末尾添加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Enable=true</span><br><span class="line">DisplaysPerHost=10</span><br><span class="line">Port=177</span><br><span class="line">AllowRoot=true</span><br><span class="line">AllowRemoteroot=true</span><br><span class="line">AllowRemoteAutoLogin=false</span><br></pre></td></tr></table></figure></li>
<li><p>修改&#x2F;etc&#x2F;gdm&#x2F;custom.conf文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[xdmcp]</span><br><span class="line">Enable=1</span><br></pre></td></tr></table></figure></li>
<li><p>修改&#x2F;etc&#x2F;inittab文件，不修改原来的设置，在文件的最后增加一行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">x:5:respawn:/usr/sbin/gdm</span><br></pre></td></tr></table></figure></li>
<li><p>修改&#x2F;usr&#x2F;share&#x2F;gdm&#x2F;defaults.conf文件，将其中的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[security]</span><br><span class="line"># Allow root to login.  It makes sense to turn this off for kiosk use, when</span><br><span class="line"># you want to minimize the possibility of break in.</span><br><span class="line">AllowRoot=true</span><br><span class="line"># Allow login as root via XDMCP.  This value will be overridden and set to</span><br><span class="line"># false if the /etc/default/login file exists and contains</span><br><span class="line"># &quot;CONSOLE=/dev/login&quot;, and set to true if the /etc/default/login file exists</span><br><span class="line"># and contains any other value or no value for CONSOLE.</span><br><span class="line">AllowRemoteRoot=false</span><br><span class="line"># This will allow remote timed login.</span><br><span class="line">AllowRemoteAutoLogin=false</span><br><span class="line"># 0 is the most restrictive, 1 allows group write permissions, 2 allows all</span><br><span class="line"># write permissions.</span><br><span class="line">RelaxPermissions=0</span><br><span class="line"># Check if directories are owned by logon user.  Set to false, if you have, for</span><br><span class="line"># example, home directories owned by some other user.</span><br><span class="line">CheckDirOwner=true</span><br><span class="line"># Number of seconds to wait after a failed login</span><br><span class="line">#RetryDelay=1</span><br><span class="line"># Maximum size of a file we wish to read.  This makes it hard for a user to DoS</span><br><span class="line"># us by using a large file.</span><br><span class="line">#UserMaxFile=65536</span><br></pre></td></tr></table></figure>
<p>AllowRemoteRoot&#x3D;false更改为AllowRemoteRoot&#x3D;true。</p>
</li>
<li><p>修改&#x2F;etc&#x2F;securetty文件，在文件底部添加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pts/0</span><br><span class="line">pts/1</span><br><span class="line">pts/2</span><br><span class="line">pts/3</span><br><span class="line">pts/4</span><br></pre></td></tr></table></figure></li>
<li><p>修改&#x2F;etc&#x2F;pam.d&#x2F;login文件，将其中的一行注释</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#auth [user_unknown=ignore success=ok ignore=ignore default=bad] pam_securetty.so</span><br></pre></td></tr></table></figure></li>
<li><p>修改&#x2F;etc&#x2F;pam.d&#x2F;remote，将其中的一行注释</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#auth       required     pam_securetty.so</span><br></pre></td></tr></table></figure></li>
<li><p>修改&#x2F;etc&#x2F;xinetd.d&#x2F;krb5-telnet文件，将文件内容由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">service telnet</span><br><span class="line">&#123;</span><br><span class="line">        flags           = REUSE</span><br><span class="line">        socket_type     = stream</span><br><span class="line">        wait            = no</span><br><span class="line">        user            = root</span><br><span class="line">        server          = /usr/kerberos/sbin/telnetd</span><br><span class="line">        log_on_failure  += USERID</span><br><span class="line">        disable         = yes</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>更改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">service telnet</span><br><span class="line">&#123;</span><br><span class="line">        flags           = REUSE</span><br><span class="line">        socket_type     = stream</span><br><span class="line">        wait            = no</span><br><span class="line">        user            = root</span><br><span class="line">        server          = /usr/kerberos/sbin/telnetd</span><br><span class="line">        log_on_failure  += USERID</span><br><span class="line">        disable         = no</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同样将&#x2F;etc&#x2F;xinetd.d&#x2F;ekrb5-telnet文件中的disable&#x3D;yes更改为disable&#x3D;no。</p>
</li>
</ol>
<h1 id="安装中文字体"><a href="#安装中文字体" class="headerlink" title="安装中文字体"></a>安装中文字体</h1><p>为了阅读代码方便，安装字体。</p>
<ol>
<li>将字体文件YaHei.Consolas.1.12.ttf放到Redhat的目录&#x2F;usr&#x2F;share&#x2F;fonts&#x2F;chinese&#x2F;TrueType目录下</li>
<li>执行mkfontscale命令，重新生成fonts.scale文件</li>
<li>执行mkfontdir命令，重新生成了fonts.dir文件。</li>
<li>执行chkfontpath –add &#x2F;usr&#x2F;share&#x2F;fonts&#x2F;chinese&#x2F;TrueType</li>
</ol>
<h1 id="更改操作系统编码从utf8到gb18030"><a href="#更改操作系统编码从utf8到gb18030" class="headerlink" title="更改操作系统编码从utf8到gb18030"></a>更改操作系统编码从utf8到gb18030</h1><p>可以通过locale命令来查看操作系统编码。输出如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">LANG=zh_CN.UTF-8</span><br><span class="line">LC_CTYPE=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_NUMERIC=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_TIME=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_COLLATE=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_MONETARY=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_MESSAGES=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_PAPER=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_NAME=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_ADDRESS=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_TELEPHONE=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_MEASUREMENT=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_IDENTIFICATION=&quot;zh_CN.UTF-8&quot;</span><br><span class="line">LC_ALL=</span><br></pre></td></tr></table></figure>

<p>打开&#x2F;etc&#x2F;sysconfig&#x2F;i18n文件，文件默认内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LANG=&quot;zh_CN.UTF-8&quot;</span><br></pre></td></tr></table></figure>
<p>将文件内容修改为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">LANG=&quot;zh_CN.GBK&quot;</span><br></pre></td></tr></table></figure>

<h1 id="相关下载"><a href="#相关下载" class="headerlink" title="相关下载"></a>相关下载</h1><p><a target="_blank" rel="noopener" href="http://pan.baidu.com/s/10ABX8">最适合程序员的字体：微软雅黑+Consolas</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/large_scale_c++_software_desigin_part_1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/large_scale_c++_software_desigin_part_1/" class="post-title-link" itemprop="url">大规模C++程序设计第1部分读书笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-04-14 00:00:00" itemprop="dateCreated datePublished" datetime="2014-04-14T00:00:00+00:00">2014-04-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="声明和定义"><a href="#声明和定义" class="headerlink" title="声明和定义"></a>声明和定义</h1><p>声明将一个名字引入到了程序中，；定义提供了一个实体（如类型、实例、函数）在程序中的唯一描述，为变量分配存储空间；</p>
<p>在一个给定的作用于中重复一个给定的声明是合法的，而重复定义是非法的。声明仅对当前编译单元有效，仅会在.o文件中加入了一个未定义符号。特定的类型不必与实际的定义类型匹配。</p>
<h1 id="内部链接和外部链接"><a href="#内部链接和外部链接" class="headerlink" title="内部链接和外部链接"></a>内部链接和外部链接</h1><p>内部链接和外部链接是根据链接过程中一个符号是在编译单元内部还是外部进行划分的，编译单元是按照一个.c或.cpp文件的作用域进行划分的。</p>
<p>内部链接：一个标识符对于编译单元（一个目标文件）来说是局部的，并在链接时与其他编译单元中的标识符不冲突。</p>
<p>内部链接包括：</p>
<ul>
<li>static类型的变量、函数</li>
<li>const类型的变量</li>
<li>枚举类型的定义</li>
<li>typedef定义的类型</li>
<li>class、struct、union的定义</li>
<li>inline函数</li>
</ul>
<p>外部链接：在多文件程序中，链接时这个标识符可以和其他编译单元交互。这些外部符号在程序中必须是唯一的，用来被其他编译单元中未定义的符号访问。</p>
<p>将带有外部链接的定义放在头文件中是错误的。</p>
<p>外部链接包括：</p>
<ul>
<li>类的非内联成员函数</li>
<li>非内联且非static函数</li>
<li>类的static数据成员</li>
</ul>
<h1 id="const类型的变量为内部链接的实例"><a href="#const类型的变量为内部链接的实例" class="headerlink" title="const类型的变量为内部链接的实例"></a>const类型的变量为内部链接的实例</h1><p>test1.h内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">print1</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>test1.cpp内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> max_length = <span class="number">256</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;max_length=%d\n&quot;</span>, max_length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>test2.h内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">print2</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>test2.cpp内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">const</span> <span class="type">int</span> max_length = <span class="number">128</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">print2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;max_length=%d\n&quot;</span>, max_length);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>main.cpp内容如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;test1.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;test2.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">print1</span>();</span><br><span class="line">	<span class="built_in">print2</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>从实例可以看出在全局作用域内声明的const类型的变量为内部链接的，在多个文件的作用域中分别定义相同的const类型的变量并不会产生冲突。</p>
<h1 id="基本规则"><a href="#基本规则" class="headerlink" title="基本规则"></a>基本规则</h1><p>直接访问类的数据成员违反了面向对象中的封装原则，应该将类的数据成员私有化，并提供接口供部访问，类似于java bean规范。</p>
<p>避免使用全局变量，应该将全局变量封装到类中，并提供接口供外部访问。</p>
<p>为避免命名冲突，将全局函数封装到类中。</p>
<p>避免在头文件的作用域中使用enum、typedef和const数据，应该将这些数据封装到头文件的类作用域中。</p>
<p>在头文件中只应该包含如下内容：类、结构体、联合体和运算符函数的声明，类、结构体、联合体和内联函数的定义。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_driver_hello_world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/linux_driver_hello_world/" class="post-title-link" itemprop="url">Linux设备驱动程序实例之hello world</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-04-02 00:00:00" itemprop="dateCreated datePublished" datetime="2014-04-02T00:00:00+00:00">2014-04-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文为Linux设备驱动程序的入门实践文章，编写一个hello world程序，并在Linux上执行。</p>
<h1 id="编写驱动程序"><a href="#编写驱动程序" class="headerlink" title="编写驱动程序"></a>编写驱动程序</h1><p>驱动程序hello.c文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#ifndef __KERNEL__</span><br><span class="line">#  define __KERNEL__</span><br><span class="line">#endif</span><br><span class="line">#ifndef MODULE</span><br><span class="line">#  define MODULE</span><br><span class="line">#endif</span><br><span class="line"></span><br><span class="line">#include &lt;linux/kernel.h&gt;</span><br><span class="line">#include &lt;linux/module.h&gt;</span><br><span class="line">#include &lt;linux/init.h&gt;</span><br><span class="line"></span><br><span class="line">MODULE_LICENSE(&quot;GPL&quot;);</span><br><span class="line"></span><br><span class="line">int hello_init()</span><br><span class="line">&#123;</span><br><span class="line">    printk(KERN_WARNING &quot;Hello kernel!\n&quot;);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">void hello_exit()</span><br><span class="line">&#123;</span><br><span class="line">    printk(&quot;Bye, kernel!\n&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">module_init(hello_init);</span><br><span class="line">module_exit(hello_exit)</span><br></pre></td></tr></table></figure>

<h1 id="编写Makefile"><a href="#编写Makefile" class="headerlink" title="编写Makefile"></a>编写Makefile</h1><p>Makefile文件的写法可以采用传统的make方式，也可以采用kbuild的方式。</p>
<p>采用传统的make方式的写法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ifeq ($(KERNELRELEASE),)</span><br><span class="line">KERNELDIR ?= /lib/modules/$(shell uname -r)/build</span><br><span class="line">PWD := $(shell pwd)</span><br><span class="line"></span><br><span class="line">modules:</span><br><span class="line">        $(MAKE) -C $(KERNELDIR) M=$(PWD) modules</span><br><span class="line"></span><br><span class="line">modules_install:</span><br><span class="line">        $(MAKE) -C $(KERNELDIR) M=$(PWD) modules_install</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">        rm -rf *.o *~ core .depend .*.cmd *.ko *.mod.c .tmp_versions</span><br><span class="line"></span><br><span class="line">.PHONY: modules modules_install clean</span><br><span class="line">else</span><br><span class="line">        obj-m := hello.o</span><br><span class="line">endif</span><br></pre></td></tr></table></figure>

<p>采用kbuild方式的Makefile内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">obj-m := hello.o</span><br><span class="line"></span><br><span class="line">all :</span><br><span class="line">        $(MAKE) -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules</span><br><span class="line"></span><br><span class="line">clean:</span><br><span class="line">        $(MAKE) -C /lib/modules/$(shell uname -r)/build M=$(PWD) clean</span><br></pre></td></tr></table></figure>

<h1 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h1><p>将hello.c和Makefile文件放在任意目录中，执行make命令编译。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>执行<code>insmod hello.ko</code>命令安装驱动程序，通过<code>lsmod</code>命令即可看到驱动程序已经安装。</p>
<p>通过查看&#x2F;var&#x2F;log&#x2F;messages文件即可看到hello驱动程序打印的内容。</p>
<h1 id="卸载"><a href="#卸载" class="headerlink" title="卸载"></a>卸载</h1><p>执行<code>rmmod hello.ko</code>命令即可卸载驱动程序模块。</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p>《深入理解Linux设备驱动程序》<br>《Linux那些事之我是USB》<br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/QuLory/archive/2012/10/23/2736339.html">Ubuntu12.10 内核源码外编译 linux模块–编译驱动模块的基本方法</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_kernel_setup/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/linux_kernel_setup/" class="post-title-link" itemprop="url">Linux下内核编译安装</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-04-01 00:00:00" itemprop="dateCreated datePublished" datetime="2014-04-01T00:00:00+00:00">2014-04-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文仅为了练习Linux内核源码的编译安装，安装环境为VMWare下的CentOS，现有CentOS版本为<code>2.6.32-358.el6.x86_64</code>。<br>&#x2F;boot&#x2F;grub&#x2F;grub.conf文件内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 注释部分去掉</span><br><span class="line">default=0</span><br><span class="line">timeout=5</span><br><span class="line">splashimage=(hd0,0)/grub/splash.xpm.gz</span><br><span class="line">hiddenmenu</span><br><span class="line">title CentOS (2.6.32-358.el6.x86_64)</span><br><span class="line">        root (hd0,0)</span><br><span class="line">        kernel /vmlinuz-2.6.32-358.el6.x86_64 ro root=/dev/mapper/vg_livedvd-lv_root rd_NO_LUKS rd_LVM_LV=vg_livedvd/lv_root rd_NO_MD crashkernel=auto rd_LVM_LV=vg_livedvd/lv_swap  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM LANG=zh_CN.UTF-8 rhgb quiet</span><br><span class="line">        initrd /initramfs-2.6.32-358.el6.x86_64.img</span><br></pre></td></tr></table></figure>

<h1 id="获取内核源码"><a href="#获取内核源码" class="headerlink" title="获取内核源码"></a>获取内核源码</h1><p>首先从Linux的<a href="www.kernel.org">官方网站</a>下载最新版内核Linux3.13。</p>
<p>执行<code>tar Jxvf linux-3.13.tar.xz -C/usr/src/kernels</code>命令将内核源码解压到内核源代码存放目录&#x2F;usr&#x2F;src&#x2F;kernels&#x2F;，该源码目录并不固定，但推荐将内核源码存放到该目录下。</p>
<p>为了将上次编译时的目标文件及相关设置文件删除，执行<code>make mrproper</code>。</p>
<h1 id="挑选功能"><a href="#挑选功能" class="headerlink" title="挑选功能"></a>挑选功能</h1><p>可以采用了多种方式，这里采用<code>make menuconfig</code>的方式来挑选内核功能，该方式不需要X Window（<code>make xconfig</code>方式）的支持，而且要比纯命令行方式（<code>make config</code>）要直观。执行<code>make menuconfig</code>遇到如下错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost linux-3.13]# make menuconfig</span><br><span class="line">  HOSTCC  scripts/basic/fixdep</span><br><span class="line">  HOSTCC  scripts/kconfig/conf.o</span><br><span class="line"> *** Unable to find the ncurses libraries or the</span><br><span class="line"> *** required header files.</span><br><span class="line"> *** &#x27;make menuconfig&#x27; requires the ncurses libraries.</span><br><span class="line"> ***</span><br><span class="line"> *** Install ncurses (ncurses-devel) and try again.</span><br><span class="line"> ***</span><br><span class="line">make[1]: *** [scripts/kconfig/dochecklxdialog] 错误 1</span><br><span class="line">make: *** [menuconfig] 错误 2</span><br></pre></td></tr></table></figure>

<p>这是因为需要ncurses库的支持，下面采用从源码安装的方式安装ncurses。</p>
<p>从ncurses的<a target="_blank" rel="noopener" href="https://www.gnu.org/software/ncurses/">官方网站</a>下载最新版的ncurses-5.9.tar.gz。然后分别执行<code>./configure</code>、make<code>、</code>make install&#96;命令安装。</p>
<h1 id="更改内核版本号标识"><a href="#更改内核版本号标识" class="headerlink" title="更改内核版本号标识"></a>更改内核版本号标识</h1><p>为了能够在编译完成后的内核版本中通过<code>uname -r</code>看到定义的内核版本号，修改Makefile文件。其中<code>EXTRAVERSION</code>字段值为空，将其赋值为kuring。</p>
<h1 id="编译内核"><a href="#编译内核" class="headerlink" title="编译内核"></a>编译内核</h1><p>执行<code>make</code>命令，该过程需要话费很长时间，我在512MB的VM下跑，花费了大约1个半小时时间。</p>
<h1 id="编译内核模块"><a href="#编译内核模块" class="headerlink" title="编译内核模块"></a>编译内核模块</h1><p>执行<code>make modules</code>命令。</p>
<h1 id="安装内核模块"><a href="#安装内核模块" class="headerlink" title="安装内核模块"></a>安装内核模块</h1><p>执行<code>make modules_install</code>命令，会将内核模块安装到&#x2F;lib&#x2F;modules目录下。</p>
<h1 id="安装内核"><a href="#安装内核" class="headerlink" title="安装内核"></a>安装内核</h1><p>执行<code>make install</code>命令，产生如下输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sh /usr/src/kernels/linux-3.13/arch/x86/boot/install.sh 3.13.0kuring arch/x86/boot/bzImage \</span><br><span class="line">                System.map &quot;/boot&quot;</span><br><span class="line">ERROR: modinfo: could not find module vmhgfs</span><br><span class="line">ERROR: modinfo: could not find module vsock</span><br><span class="line">ERROR: modinfo: could not find module vmware_balloon</span><br><span class="line">ERROR: modinfo: could not find module vmci</span><br></pre></td></tr></table></figure>
<p>这个错误跟vmware的vmware tools有关，暂时不去管。</p>
<p>这样再去看&#x2F;boot&#x2F;grub&#x2F;grub.conf文件，会看到文件已经变化，已经将新内核添加到开机启动项中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 注释部分去掉</span><br><span class="line">default=1</span><br><span class="line">timeout=5</span><br><span class="line">splashimage=(hd0,0)/grub/splash.xpm.gz</span><br><span class="line">hiddenmenu</span><br><span class="line">title CentOS (3.13.0kuring)</span><br><span class="line">        root (hd0,0)</span><br><span class="line">        kernel /vmlinuz-3.13.0kuring ro root=/dev/mapper/vg_livedvd-lv_root rd_NO_LUKS rd_LVM_LV=vg_livedvd/lv_root rd_NO_MD crashkernel=auto rd_LVM_LV=vg_livedvd/lv_swap  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM LANG=zh_CN.UTF-8 rhgb quiet</span><br><span class="line">        initrd /initramfs-3.13.0kuring.img</span><br><span class="line">title CentOS (2.6.32-358.el6.x86_64)</span><br><span class="line">        root (hd0,0)</span><br><span class="line">        kernel /vmlinuz-2.6.32-358.el6.x86_64 ro root=/dev/mapper/vg_livedvd-lv_root rd_NO_LUKS rd_LVM_LV=vg_livedvd/lv_root rd_NO_MD crashkernel=auto rd_LVM_LV=vg_livedvd/lv_swap  KEYBOARDTYPE=pc KEYTABLE=us rd_NO_DM LANG=zh_CN.UTF-8 rhgb quiet</span><br><span class="line">        initrd /initramfs-2.6.32-358.el6.x86_64.img</span><br></pre></td></tr></table></figure>

<p>同时在&#x2F;boot目录下已经多出了vmlinuz-3.13.0kuring、System.map-3.13.0kuring、initramfs-3.13.0kuring.img文件。</p>
<p>重启系统后，在启动菜单中多出了新内核选项。进入新内核后，执行<code>uname -r</code>显示<code>3.13.0kuring</code>，说明新内核已经安装完成。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/centos6.5_svn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/centos6.5_svn/" class="post-title-link" itemprop="url">CentOS6.5下安装svn客户端软件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-03-22 00:00:00" itemprop="dateCreated datePublished" datetime="2014-03-22T00:00:00+00:00">2014-03-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在用CentOS默认的svn客户端工具访问Windows下搭建的subversion时会提示如下错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost 桌面]$ svn checkout https://192.168.100.100/svn/test</span><br><span class="line">svn: 方法 OPTIONS 失败于 “https://192.168.100.100/svn/test: SSL handshake failed: SSL 错误：Key usage violation in certificate has been detected. (https://192.168.100.100)</span><br></pre></td></tr></table></figure>

<p>通过执行如下命令可以看到svn是支持https协议的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost ~]$ svn --version</span><br><span class="line">svn，版本 1.6.11 (r934486)</span><br><span class="line">   编译于 Apr 11 2013，16:13:51</span><br><span class="line"></span><br><span class="line">版权所有 (C) 2000-2009 CollabNet。</span><br><span class="line">Subversion 是开放源代码软件，请参阅 http://subversion.tigris.org/ 站点。</span><br><span class="line">此产品包含由 CollabNet(http://www.Collab.Net/) 开发的软件。</span><br><span class="line"></span><br><span class="line">可使用以下的版本库访问模块:</span><br><span class="line"></span><br><span class="line">* ra_neon : 通过 WebDAV 协议使用 neon 访问版本库的模块。</span><br><span class="line">  - 处理“http”方案</span><br><span class="line">  - 处理“https”方案</span><br><span class="line">* ra_svn : 使用 svn 网络协议访问版本库的模块。  - 使用 Cyrus SASL 认证</span><br><span class="line">  - 处理“svn”方案</span><br><span class="line">* ra_local : 访问本地磁盘的版本库模块。</span><br><span class="line">  - 处理“file”方案</span><br></pre></td></tr></table></figure>

<p>这是由于svn客户端在https协议中使用了GnuTLS库造成的，将其更改为使用openssl库即可。通过执行如下命令可以查看svn使用的库：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost bin]$ ldd svn | grep ssl</span><br><span class="line">[kuring@localhost bin]$ ldd svn | grep tls</span><br><span class="line">        libgnutls.so.26 =&gt; /usr/lib64/libgnutls.so.26 (0x00007f33004ad000)</span><br></pre></td></tr></table></figure>

<hr>
<p>下面选择重新编译的方式来安装svn。</p>
<h1 id="删除subversion"><a href="#删除subversion" class="headerlink" title="删除subversion"></a>删除subversion</h1><p>执行：<code>yum remove subversion</code></p>
<h1 id="检查openssl安装情况"><a href="#检查openssl安装情况" class="headerlink" title="检查openssl安装情况"></a>检查openssl安装情况</h1><p>这里已经安装：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost tmp]$ rpm -qa | grep openssl</span><br><span class="line">openssl-1.0.1e-15.el6.x86_64</span><br><span class="line">openssl-devel-1.0.1e-15.el6.x86_64</span><br></pre></td></tr></table></figure>

<h1 id="安装neon"><a href="#安装neon" class="headerlink" title="安装neon"></a>安装neon</h1><p>这里选择的安装版本为0.29.6，subversion对neon的版本有要求。如果不是subversion的版本，在执行subversion下的configure文件时并不会报错</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost software]$ tar zvxf neon-0.29.6.tar.gz</span><br><span class="line">[kuring@localhost software]$ cd neon-0.29.6</span><br><span class="line">./configure --with-ssl=openssl</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<h1 id="安装apr"><a href="#安装apr" class="headerlink" title="安装apr"></a>安装apr</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar zvxf apr-1.5.0.tar.gz</span><br><span class="line">cd apr-1.5.0</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<h1 id="安装apr-util"><a href="#安装apr-util" class="headerlink" title="安装apr-util"></a>安装apr-util</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tar zvxf apr-util-1.5.3.tar.gz </span><br><span class="line">cd apr-util-1.5.3</span><br><span class="line">./configure --with-apr=/usr/local/apr</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<h1 id="下载sqllite"><a href="#下载sqllite" class="headerlink" title="下载sqllite"></a>下载sqllite</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">unzip sqlite-amalgamation-3080401.zip</span><br><span class="line">mv sqlite-amalgamation-3080401 sqlite-amalgamation</span><br><span class="line">mv sqlite-amalgamation subversion-1.8.8/	// 将其复制到subversion源码目录下</span><br></pre></td></tr></table></figure>

<h1 id="安装subversion"><a href="#安装subversion" class="headerlink" title="安装subversion"></a>安装subversion</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar zvxf subversion-1.7.16.tar.gz</span><br><span class="line">./configure --with-ssl --with-neon --with-apr=/usr/local/apr --with-apr-util=/usr/local/apr</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure>

<p>然后再执行<code>svn --version</code>命令可以看到已经包含了https协议。</p>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><p><a target="_blank" rel="noopener" href="http://itekblog.com/key-usage-violation-in-certificate-has-been-detected-centos/">SSL handshake failed: SSL error: Key usage violation in certificate has been detected CentOS</a></p>
<h1 id="资料下载"><a href="#资料下载" class="headerlink" title="资料下载"></a>资料下载</h1><p><a target="_blank" rel="noopener" href="http://pan.baidu.com/s/1qWNhAqS">需要的安装包下载</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/eclipse_viplugin/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/eclipse_viplugin/" class="post-title-link" itemprop="url">在Eclipse中安装viplugin插件</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-03-22 00:00:00" itemprop="dateCreated datePublished" datetime="2014-03-22T00:00:00+00:00">2014-03-22</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>从官方网站下载最新的viplugin插件：viPlugin_2.12.0。</p>
<p>将viPlugin_2.12.0.zip文件解压到eclipse安装目录下的dropins目录下。</p>
<p>该插件为收费插件，在eclipse安装的根目录下新建viPlugin2.lic文件，文件内容为:_q1MHdGlxh7nCyn_FpHaVazxTdn1tajjeIABlcgJBc20<br>_。</p>
<p>重启eclipse后即可生效。</p>
<p>官方参考文档地址：<a target="_blank" rel="noopener" href="http://www.viplugin.com/files/User_Manual_viPlugin.pdf">http://www.viplugin.com/files/User_Manual_viPlugin.pdf</a></p>
<hr>
<p>相关下载：<a target="_blank" rel="noopener" href="http://pan.baidu.com/s/1kT4uStT">viPlugin_2.12.0.zip</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_permission/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/linux_permission/" class="post-title-link" itemprop="url">Linux难点之权限类型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-03-08 00:00:00" itemprop="dateCreated datePublished" datetime="2014-03-08T00:00:00+00:00">2014-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<p>在Linux操作系统中，每个文件都有一组9个权限位来控制谁能够读写和执行该文件的内容。这组权限对于文件的意义非常容易理解。但是对于目录而言就不是那么容易理解了。要想搞明白权限机制需要了解文件系统中的inode节点和block等概念，并大致了解文件系统的内部实现原理。</p>
<h1 id="文件的权限"><a href="#文件的权限" class="headerlink" title="文件的权限"></a>文件的权限</h1><p>这部分比较容易理解。比较容易搞错的为：</p>
<p>w位：包含对文件的添加、修改该文件内容的权限，但不包含删除文件或移动该文件的权限，因为文件的文件名信息存储在父目录的block中，而不是在该文件的inode节点中。父目录的block中包含该文件的inode节点和文件名信息，通过父目录中的inode节点找到该文件。</p>
<h1 id="目录的权限"><a href="#目录的权限" class="headerlink" title="目录的权限"></a>目录的权限</h1><p>r位：表示具有读取该目录列表的权限。</p>
<p>w位：对该文件夹下创建新的文件或目录进行增加、删除、修改操作。</p>
<p>x位：这个稍微难以理解。表示用户能否进入该目录成为工作目录，即是否可以cd到该目录。通常和r位组合一块使用。</p>
<h2 id="例子一"><a href="#例子一" class="headerlink" title="例子一"></a>例子一</h2><p>假设root用户对testing目录和testing目录下的testing文件拥有的如下权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# ls -ald testing/ testing/testing</span><br><span class="line">drwxr--r--. 2 root root 4096 3月   1 11:44 testing/</span><br><span class="line">-rw-------. 1 root root    0 3月   1 11:44 testing/testing</span><br></pre></td></tr></table></figure>

<p>kuring用户拥有对该文件夹的读权限，但是没有x权限。当kuring用户访问时会提示如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 拥有r的权限可以查询文件名，但是没有x权限，不能读取除文件名外的其他信息，产生了问号。</span><br><span class="line">[kuring@localhost tmp]$ ll testing/</span><br><span class="line">ls: 无法访问testing/testing: 权限不够</span><br><span class="line">总用量 0</span><br><span class="line">-????????? ? ? ? ?            ? testing    </span><br><span class="line"></span><br><span class="line">// 没有x权限，不能进入该目录</span><br><span class="line">[kuring@localhost tmp]$ cd testing/</span><br><span class="line">bash: cd: testing/: 权限不够</span><br></pre></td></tr></table></figure>

<h2 id="例子二"><a href="#例子二" class="headerlink" title="例子二"></a>例子二</h2><p>在上述例子中，给kuring用户增加对目录testing的rwx权限，却只拥有testing目录下的testing文件的r权限。权限情况如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost tmp]$ ls -ald testing testing/testing</span><br><span class="line">drwxr--rwx. 2 root root 4096 3月   1 13:29 testing</span><br><span class="line">-rw-r--r--. 1 root root    0 3月   1 13:29 testing/testing</span><br></pre></td></tr></table></figure>

<p>kuring用户执行如下操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 当对文件进行更改时由于没有对文件的w权限，操作失败</span><br><span class="line">[kuring@localhost tmp]$ echo &quot;world&quot; &gt;&gt; testing/testing</span><br><span class="line">bash: testing/testing: 权限不够</span><br><span class="line"></span><br><span class="line">// 当对文件进行删除操作时却可以删除该文件，这是因为文件删除操作的权限是由该文件所在目录的w位决定的</span><br><span class="line">// 文件删除操作会修改父目录中block节点中的文件名内容，而父目录的权限为rx，不可写。</span><br><span class="line">[kuring@localhost tmp]$ rm testing/testing</span><br><span class="line">rm：是否删除有写保护的普通文件 &quot;testing/testing&quot;？y</span><br><span class="line">[kuring@localhost tmp]$ ls testing/</span><br><span class="line">[kuring@localhost tmp]$</span><br></pre></td></tr></table></figure>

<p>只有了解了原理，就可以理解在多级目录并且目录的权限不一致的情况下相应的权限问题了。</p>
<hr>
<h1 id="进程用户ID"><a href="#进程用户ID" class="headerlink" title="进程用户ID"></a>进程用户ID</h1><p>要讲解set uid和set gid，就涉及到进程的用户ID概念。用户ID又可以分为两部分：</p>
<ul>
<li><p>实际用户ID和实际组ID：标识了究竟是哪个用户执行了该程序，跟命令行中的登录用户一致，可以通过id命令查看。</p>
</li>
<li><p>有效用户ID和有效组ID：系统通过有效用户ID、有效组ID和附加组ID来决定进行对系统资源的访问权限。在Linux系统中一个用户可以属于多个组，在&#x2F;etc&#x2F;passwd文件中一个用户仅能标识出隶属于一个组ID，该组ID叫做默认的组ID。在&#x2F;etc&#x2F;group为文件中可以标识出一个用户隶属于多个组，这多个组中除去默认的组ID叫做附加组ID。</p>
</li>
</ul>
<h1 id="set-uid"><a href="#set-uid" class="headerlink" title="set uid"></a>set uid</h1><ul>
<li>该权限位仅对二进制文件有效</li>
<li>执行者对该程序需要具有x的权限</li>
<li>该权限仅在执行该程序过程中有效</li>
<li>执行者将具有该程序拥有者的权限</li>
</ul>
<p>以&#x2F;usr&#x2F;bin&#x2F;passwd命令为例，该程序的权限为：rwsr-xr-x。普通用户可以调用该程序修改自己的密码，而密码文件&#x2F;etc&#x2F;shadow未设置任何权限，即只有root用户可以操作该文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# ll /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x. 1 root root 30768 2月  22 2012 /usr/bin/passwd</span><br><span class="line">[root@localhost tmp]# ll /etc/shadow</span><br><span class="line">----------. 1 root root 1248 11月 30 10:50 /etc/shadow</span><br></pre></td></tr></table></figure>

<p>passwd文件的s标志表明setuid位被设置。</p>
<p>passwd的拥有者为root；当普通用户执行passwd命令时，普通用户具有该命令的执行权限；passwd执行该命令时会暂时获得root用户权限；&#x2F;etc&#x2F;shadow就可以被修改。</p>
<p>也许看到这里就会有疑问：那岂不是普通用户可以通过&#x2F;etc&#x2F;passwd命令修改其他用户的密码了。之所以不可以这么操作是因为passwd命令内部通过逻辑实现。</p>
<h1 id="set-gid"><a href="#set-gid" class="headerlink" title="set gid"></a>set gid</h1><p>设置在文件上的情况：</p>
<ul>
<li>该权限位仅对二进制文件有效</li>
<li>执行者对该程序需要具有x的权限</li>
<li>执行者在运行程序的过程中将会获得该执行群组的权限</li>
</ul>
<p>设置在目录上的情况：</p>
<ul>
<li>用户对目录具有r和x的权限</li>
<li>用户在目录下的有效群组将会变成该目录的群组</li>
<li>若用户在此目录下具有w的权限，使用者建立的群组与该目录的群组相同</li>
</ul>
<h1 id="粘附位（sticky-bit）"><a href="#粘附位（sticky-bit）" class="headerlink" title="粘附位（sticky bit）"></a>粘附位（sticky bit）</h1><p>该权限位仅对目录有效，如果在目录上设置了粘附位，只有该目录的属主、该文件的属主或root用户可以删除或重命名该目录文件。</p>
<p>&#x2F;tmp文件夹的权限如下，其中的t位表示粘附位：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost /]$ ll -ad tmp/</span><br><span class="line">drwxrwxrwt. 25 root root 4096 3月   1 14:51 tmp/</span><br></pre></td></tr></table></figure>

<p>如果在&#x2F;tmp下kuring用户创建了自己的文件kuring_file，并设置权限为777，test用户并不能删除该文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost tmp]$ touch kuring_file</span><br><span class="line">[kuring@localhost tmp]$ ll kuring_file</span><br><span class="line">-rw-rw-r--. 1 kuring kuring 0 3月   1 15:05 kuring_file</span><br><span class="line">[kuring@localhost tmp]$ chmod 777 kuring_file</span><br><span class="line">[kuring@localhost tmp]$ ll kuring_file</span><br><span class="line">-rwxrwxrwx. 1 kuring kuring 0 3月   1 15:05 kuring_file</span><br><span class="line"></span><br><span class="line">[kuring@localhost tmp]$ su - test</span><br><span class="line">密码：</span><br><span class="line">[test@localhost ~]$ cd /tmp/</span><br><span class="line">[test@localhost tmp]$ rm kuring_file</span><br><span class="line">rm: 无法删除&quot;kuring_file&quot;: 不允许的操作</span><br></pre></td></tr></table></figure>

<h1 id="表示方法"><a href="#表示方法" class="headerlink" title="表示方法"></a>表示方法</h1><p>如果设置了setuid位，属主的执行权限中的x用s来代替；<br>如果设置了setgid位，组执行权限中的x用s来代替；<br>如果设置了sticky位，权限最后的那个字符被设置为t；<br>如果设置了setuid、setgid或sticky位中一个，又没有设置相应的执行位，这些位显示为S或T。</p>
<h1 id="权限设定方式"><a href="#权限设定方式" class="headerlink" title="权限设定方式"></a>权限设定方式</h1><p>4为setuid位，2为setgid位，1为sticky位。具体参考《鸟哥的Linux私房菜》。</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p>《鸟哥的Linux私房菜》<br>《UNIX&#x2F;Linux系统管理技术手册》</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_screen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/linux_screen/" class="post-title-link" itemprop="url">Linux下的screen命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-02-18 20:51:12" itemprop="dateCreated datePublished" datetime="2014-02-18T20:51:12+00:00">2014-02-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在使用SSH或者telent远程登录到Linux 服务器，经常运行一些需要很长时间才能完成的任务，比如系统备份、ftp 传输等等。通常情况下我们都是为每一个这样的任务开一个远程终端窗口，因为它们执行的时间太长了。必须等待它们执行完毕，在此期间不能关掉窗口或者断开连接，否则这个任务就会被杀掉，一切半途而废了。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>CentOS下默认没有安装该命令，从screen的官方网站下载，下载地址：<a target="_blank" rel="noopener" href="http://ftp.gnu.org/gnu/screen/%E3%80%82">http://ftp.gnu.org/gnu/screen/。</a></p>
<ol>
<li>解压后执行<code>./configure</code>。</li>
<li>执行<code>make</code>命令。在执行make命令时会遇到错误<code>pty.c:38:26: 错误：sys/stropts.h：没有那个文件或目录</code>，在&#x2F;usr&#x2F;install&#x2F;sys&#x2F;目录下创建一个stropts.h的空文件即可。</li>
<li>执行<code>make install</code>，该命令并不会将screen命令复制到系统的PATH变量包含的路径下，即不能执行screen命令。</li>
<li>执行<code>install -m 644 etc/etcscreenrc /etc/screenrc</code>。</li>
<li>执行<code>cp screen /bin/</code>。</li>
<li>执行<code>cp doc/man/man1/screen.1 /usr/share/man/man1/</code>，即可以可使用<code>man screen</code>查看帮助。</li>
</ol>
<h1 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h1><p>当关闭窗口或断开连接时，内核会将SIGHUP信号发送到会话期首进程，进程对SIGHUP的处理动作为终止。如果会话期首进程终止，则该信号发送到该会话期前台进程组。一个进程退出导致一个孤儿进程组中产生时，如果任意一个孤儿进程组进程处于STOP状态，发送SIGHUP和SIGCONT信号到该进程组中所有进程。因此当网络断开或终端窗口关闭后，控制进程收到SIGHUP信号退出，会导致该会话期内其他进程退出。</p>
<p>为解决上述问题，Linux程序在设计时可设计成守护进程的方式启动。</p>
<p>另外也可以通过<code>nohup 命令 &amp;</code>的方式启动来解决问题。</p>
<h1 id="新建screen"><a href="#新建screen" class="headerlink" title="新建screen"></a>新建screen</h1><ul>
<li>直接输入<code>screen</code>命令即可使用。</li>
<li>输入<code>screen -S kuring</code>，这里给screen取了一个名字，方便辨认。</li>
<li><code>screen 命令</code>直接在screen中执行命令，命令结束后screen退出。</li>
</ul>
<h1 id="分离与恢复"><a href="#分离与恢复" class="headerlink" title="分离与恢复"></a>分离与恢复</h1><p>在screen窗口中执行<code>ctrl + a d</code>命令，screen会给出_[detached]_提示，并恢复到执行screen之前的bash。<br>查找之前的screen执行<code>screen -ls</code>，会列出当前打开的screen。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">There are screens on:</span><br><span class="line">        8576.pts-3.localhost    (Attached)</span><br><span class="line">        8449.kuring     (Detached)</span><br><span class="line">2 Sockets in /tmp/uscreens/S-kuring.</span><br></pre></td></tr></table></figure>
<p>这里系统中打开了两个screen，一个为Attached，另一个为Detached。</p>
<p>重新连接执行<code>screen -r kuring</code>或<code>screen -r 8449</code>或<code>screen -r</code>，当系统中仅有一个处于Detached状态的screen时就可以直接执行<code>screen -r</code>命令。</p>
<h1 id="关闭窗口"><a href="#关闭窗口" class="headerlink" title="关闭窗口"></a>关闭窗口</h1><p>在screen的shell中执行<code>exit</code>命令即可关闭screen。</p>
<p>也可以执行<code>ctrl + a k</code>，会杀死当前screen中的所有运行进程。</p>
<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><p>在screen中执行vi命令时会提示_E437: terminal capability “cm” required_错误，执行<code>echo $TERM</code>查看发现打印值为_screen_，而未执行screen时的bash打印值为_xterm_，在screen中执行<code>export TERM=xterm</code>即可解决该问题。</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p>更多高级使用方法请参考以下文档：</p>
<p><a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/cn/linux/l-cn-screen/">linux 技巧：使用 screen 管理你的远程会话</a><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/mchina/archive/2013/01/30/2880680.html">linux screen 命令详解</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/c_trim/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/c_trim/" class="post-title-link" itemprop="url">用C语言实现的trim函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-02-18 00:00:00" itemprop="dateCreated datePublished" datetime="2014-02-18T00:00:00+00:00">2014-02-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-09-30 16:01:08" itemprop="dateModified" datetime="2023-09-30T16:01:08+00:00">2023-09-30</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>trim函数在其他语言中比较常见，这里用C语言实现一个，不使用C语言的库函数。该例子中不需要额外的申请空间，算法的时间复杂度为O(1)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">char *trim(char * str)</span><br><span class="line">&#123;</span><br><span class="line">	char *buf1, *buf2;</span><br><span class="line">	int i;</span><br><span class="line">	if (str == NULL)</span><br><span class="line">	&#123;</span><br><span class="line">		return NULL;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	// 处理字符串前面的空格	</span><br><span class="line">	for (buf1=str; *buf1 &amp;&amp; *buf1==&#x27; &#x27;; buf1++);</span><br><span class="line"></span><br><span class="line">	// 将去掉前面空格的字符串向前复制</span><br><span class="line">	for (buf2=str, i=0; *buf1;)</span><br><span class="line">	&#123;</span><br><span class="line">		*buf2++ = *buf1++;</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">	*buf2 = &#x27;\0&#x27;;</span><br><span class="line"></span><br><span class="line">	// 处理字符串后面的空格</span><br><span class="line">	while (*--buf2 == &#x27; &#x27;)</span><br><span class="line">	&#123;</span><br><span class="line">		*buf2 = &#x27;\0&#x27;;</span><br><span class="line">	&#125;</span><br><span class="line">	return str;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">      printf(&quot;trim(\&quot;%s\&quot;) &quot;, argv[1]);</span><br><span class="line">      printf(&quot;returned \&quot;%s\&quot;\n&quot;, trim(argv[1]));</span><br><span class="line">      return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/17/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><span class="space">&hellip;</span><a class="page-number" href="/page/23/">23</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/19/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder"></span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  





</body>
</html>
