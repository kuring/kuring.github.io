<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"kuring.me","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.18.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":true,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":true,"preload":true}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="404频道">
<meta property="og:url" content="http://kuring.me/page/19/index.html">
<meta property="og:site_name" content="404频道">
<meta property="og:locale">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://kuring.me/page/19/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-Hans","comments":"","permalink":"","path":"page/19/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>404频道</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">404频道</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">学习笔记</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name"></p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">232</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">34</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/kuring" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;kuring" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_permission/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/linux_permission/" class="post-title-link" itemprop="url">Linux难点之权限类型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-03-08 00:00:00" itemprop="dateCreated datePublished" datetime="2014-03-08T00:00:00+00:00">2014-03-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>[TOC]</p>
<p>在Linux操作系统中，每个文件都有一组9个权限位来控制谁能够读写和执行该文件的内容。这组权限对于文件的意义非常容易理解。但是对于目录而言就不是那么容易理解了。要想搞明白权限机制需要了解文件系统中的inode节点和block等概念，并大致了解文件系统的内部实现原理。</p>
<h1 id="文件的权限"><a href="#文件的权限" class="headerlink" title="文件的权限"></a>文件的权限</h1><p>这部分比较容易理解。比较容易搞错的为：</p>
<p>w位：包含对文件的添加、修改该文件内容的权限，但不包含删除文件或移动该文件的权限，因为文件的文件名信息存储在父目录的block中，而不是在该文件的inode节点中。父目录的block中包含该文件的inode节点和文件名信息，通过父目录中的inode节点找到该文件。</p>
<h1 id="目录的权限"><a href="#目录的权限" class="headerlink" title="目录的权限"></a>目录的权限</h1><p>r位：表示具有读取该目录列表的权限。</p>
<p>w位：对该文件夹下创建新的文件或目录进行增加、删除、修改操作。</p>
<p>x位：这个稍微难以理解。表示用户能否进入该目录成为工作目录，即是否可以cd到该目录。通常和r位组合一块使用。</p>
<h2 id="例子一"><a href="#例子一" class="headerlink" title="例子一"></a>例子一</h2><p>假设root用户对testing目录和testing目录下的testing文件拥有的如下权限：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# ls -ald testing/ testing/testing</span><br><span class="line">drwxr--r--. 2 root root 4096 3月   1 11:44 testing/</span><br><span class="line">-rw-------. 1 root root    0 3月   1 11:44 testing/testing</span><br></pre></td></tr></table></figure>

<p>kuring用户拥有对该文件夹的读权限，但是没有x权限。当kuring用户访问时会提示如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 拥有r的权限可以查询文件名，但是没有x权限，不能读取除文件名外的其他信息，产生了问号。</span><br><span class="line">[kuring@localhost tmp]$ ll testing/</span><br><span class="line">ls: 无法访问testing/testing: 权限不够</span><br><span class="line">总用量 0</span><br><span class="line">-????????? ? ? ? ?            ? testing    </span><br><span class="line"></span><br><span class="line">// 没有x权限，不能进入该目录</span><br><span class="line">[kuring@localhost tmp]$ cd testing/</span><br><span class="line">bash: cd: testing/: 权限不够</span><br></pre></td></tr></table></figure>

<h2 id="例子二"><a href="#例子二" class="headerlink" title="例子二"></a>例子二</h2><p>在上述例子中，给kuring用户增加对目录testing的rwx权限，却只拥有testing目录下的testing文件的r权限。权限情况如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost tmp]$ ls -ald testing testing/testing</span><br><span class="line">drwxr--rwx. 2 root root 4096 3月   1 13:29 testing</span><br><span class="line">-rw-r--r--. 1 root root    0 3月   1 13:29 testing/testing</span><br></pre></td></tr></table></figure>

<p>kuring用户执行如下操作：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 当对文件进行更改时由于没有对文件的w权限，操作失败</span><br><span class="line">[kuring@localhost tmp]$ echo &quot;world&quot; &gt;&gt; testing/testing</span><br><span class="line">bash: testing/testing: 权限不够</span><br><span class="line"></span><br><span class="line">// 当对文件进行删除操作时却可以删除该文件，这是因为文件删除操作的权限是由该文件所在目录的w位决定的</span><br><span class="line">// 文件删除操作会修改父目录中block节点中的文件名内容，而父目录的权限为rx，不可写。</span><br><span class="line">[kuring@localhost tmp]$ rm testing/testing</span><br><span class="line">rm：是否删除有写保护的普通文件 &quot;testing/testing&quot;？y</span><br><span class="line">[kuring@localhost tmp]$ ls testing/</span><br><span class="line">[kuring@localhost tmp]$</span><br></pre></td></tr></table></figure>

<p>只有了解了原理，就可以理解在多级目录并且目录的权限不一致的情况下相应的权限问题了。</p>
<hr>
<h1 id="进程用户ID"><a href="#进程用户ID" class="headerlink" title="进程用户ID"></a>进程用户ID</h1><p>要讲解set uid和set gid，就涉及到进程的用户ID概念。用户ID又可以分为两部分：</p>
<ul>
<li><p>实际用户ID和实际组ID：标识了究竟是哪个用户执行了该程序，跟命令行中的登录用户一致，可以通过id命令查看。</p>
</li>
<li><p>有效用户ID和有效组ID：系统通过有效用户ID、有效组ID和附加组ID来决定进行对系统资源的访问权限。在Linux系统中一个用户可以属于多个组，在&#x2F;etc&#x2F;passwd文件中一个用户仅能标识出隶属于一个组ID，该组ID叫做默认的组ID。在&#x2F;etc&#x2F;group为文件中可以标识出一个用户隶属于多个组，这多个组中除去默认的组ID叫做附加组ID。</p>
</li>
</ul>
<h1 id="set-uid"><a href="#set-uid" class="headerlink" title="set uid"></a>set uid</h1><ul>
<li>该权限位仅对二进制文件有效</li>
<li>执行者对该程序需要具有x的权限</li>
<li>该权限仅在执行该程序过程中有效</li>
<li>执行者将具有该程序拥有者的权限</li>
</ul>
<p>以&#x2F;usr&#x2F;bin&#x2F;passwd命令为例，该程序的权限为：rwsr-xr-x。普通用户可以调用该程序修改自己的密码，而密码文件&#x2F;etc&#x2F;shadow未设置任何权限，即只有root用户可以操作该文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost tmp]# ll /usr/bin/passwd</span><br><span class="line">-rwsr-xr-x. 1 root root 30768 2月  22 2012 /usr/bin/passwd</span><br><span class="line">[root@localhost tmp]# ll /etc/shadow</span><br><span class="line">----------. 1 root root 1248 11月 30 10:50 /etc/shadow</span><br></pre></td></tr></table></figure>

<p>passwd文件的s标志表明setuid位被设置。</p>
<p>passwd的拥有者为root；当普通用户执行passwd命令时，普通用户具有该命令的执行权限；passwd执行该命令时会暂时获得root用户权限；&#x2F;etc&#x2F;shadow就可以被修改。</p>
<p>也许看到这里就会有疑问：那岂不是普通用户可以通过&#x2F;etc&#x2F;passwd命令修改其他用户的密码了。之所以不可以这么操作是因为passwd命令内部通过逻辑实现。</p>
<h1 id="set-gid"><a href="#set-gid" class="headerlink" title="set gid"></a>set gid</h1><p>设置在文件上的情况：</p>
<ul>
<li>该权限位仅对二进制文件有效</li>
<li>执行者对该程序需要具有x的权限</li>
<li>执行者在运行程序的过程中将会获得该执行群组的权限</li>
</ul>
<p>设置在目录上的情况：</p>
<ul>
<li>用户对目录具有r和x的权限</li>
<li>用户在目录下的有效群组将会变成该目录的群组</li>
<li>若用户在此目录下具有w的权限，使用者建立的群组与该目录的群组相同</li>
</ul>
<h1 id="粘附位（sticky-bit）"><a href="#粘附位（sticky-bit）" class="headerlink" title="粘附位（sticky bit）"></a>粘附位（sticky bit）</h1><p>该权限位仅对目录有效，如果在目录上设置了粘附位，只有该目录的属主、该文件的属主或root用户可以删除或重命名该目录文件。</p>
<p>&#x2F;tmp文件夹的权限如下，其中的t位表示粘附位：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost /]$ ll -ad tmp/</span><br><span class="line">drwxrwxrwt. 25 root root 4096 3月   1 14:51 tmp/</span><br></pre></td></tr></table></figure>

<p>如果在&#x2F;tmp下kuring用户创建了自己的文件kuring_file，并设置权限为777，test用户并不能删除该文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost tmp]$ touch kuring_file</span><br><span class="line">[kuring@localhost tmp]$ ll kuring_file</span><br><span class="line">-rw-rw-r--. 1 kuring kuring 0 3月   1 15:05 kuring_file</span><br><span class="line">[kuring@localhost tmp]$ chmod 777 kuring_file</span><br><span class="line">[kuring@localhost tmp]$ ll kuring_file</span><br><span class="line">-rwxrwxrwx. 1 kuring kuring 0 3月   1 15:05 kuring_file</span><br><span class="line"></span><br><span class="line">[kuring@localhost tmp]$ su - test</span><br><span class="line">密码：</span><br><span class="line">[test@localhost ~]$ cd /tmp/</span><br><span class="line">[test@localhost tmp]$ rm kuring_file</span><br><span class="line">rm: 无法删除&quot;kuring_file&quot;: 不允许的操作</span><br></pre></td></tr></table></figure>

<h1 id="表示方法"><a href="#表示方法" class="headerlink" title="表示方法"></a>表示方法</h1><p>如果设置了setuid位，属主的执行权限中的x用s来代替；<br>如果设置了setgid位，组执行权限中的x用s来代替；<br>如果设置了sticky位，权限最后的那个字符被设置为t；<br>如果设置了setuid、setgid或sticky位中一个，又没有设置相应的执行位，这些位显示为S或T。</p>
<h1 id="权限设定方式"><a href="#权限设定方式" class="headerlink" title="权限设定方式"></a>权限设定方式</h1><p>4为setuid位，2为setgid位，1为sticky位。具体参考《鸟哥的Linux私房菜》。</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p>《鸟哥的Linux私房菜》<br>《UNIX&#x2F;Linux系统管理技术手册》</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_screen/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/linux_screen/" class="post-title-link" itemprop="url">Linux下的screen命令</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-02-18 20:51:12" itemprop="dateCreated datePublished" datetime="2014-02-18T20:51:12+00:00">2014-02-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在使用SSH或者telent远程登录到Linux 服务器，经常运行一些需要很长时间才能完成的任务，比如系统备份、ftp 传输等等。通常情况下我们都是为每一个这样的任务开一个远程终端窗口，因为它们执行的时间太长了。必须等待它们执行完毕，在此期间不能关掉窗口或者断开连接，否则这个任务就会被杀掉，一切半途而废了。</p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>CentOS下默认没有安装该命令，从screen的官方网站下载，下载地址：<a target="_blank" rel="noopener" href="http://ftp.gnu.org/gnu/screen/%E3%80%82">http://ftp.gnu.org/gnu/screen/。</a></p>
<ol>
<li>解压后执行<code>./configure</code>。</li>
<li>执行<code>make</code>命令。在执行make命令时会遇到错误<code>pty.c:38:26: 错误：sys/stropts.h：没有那个文件或目录</code>，在&#x2F;usr&#x2F;install&#x2F;sys&#x2F;目录下创建一个stropts.h的空文件即可。</li>
<li>执行<code>make install</code>，该命令并不会将screen命令复制到系统的PATH变量包含的路径下，即不能执行screen命令。</li>
<li>执行<code>install -m 644 etc/etcscreenrc /etc/screenrc</code>。</li>
<li>执行<code>cp screen /bin/</code>。</li>
<li>执行<code>cp doc/man/man1/screen.1 /usr/share/man/man1/</code>，即可以可使用<code>man screen</code>查看帮助。</li>
</ol>
<h1 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h1><p>当关闭窗口或断开连接时，内核会将SIGHUP信号发送到会话期首进程，进程对SIGHUP的处理动作为终止。如果会话期首进程终止，则该信号发送到该会话期前台进程组。一个进程退出导致一个孤儿进程组中产生时，如果任意一个孤儿进程组进程处于STOP状态，发送SIGHUP和SIGCONT信号到该进程组中所有进程。因此当网络断开或终端窗口关闭后，控制进程收到SIGHUP信号退出，会导致该会话期内其他进程退出。</p>
<p>为解决上述问题，Linux程序在设计时可设计成守护进程的方式启动。</p>
<p>另外也可以通过<code>nohup 命令 &amp;</code>的方式启动来解决问题。</p>
<h1 id="新建screen"><a href="#新建screen" class="headerlink" title="新建screen"></a>新建screen</h1><ul>
<li>直接输入<code>screen</code>命令即可使用。</li>
<li>输入<code>screen -S kuring</code>，这里给screen取了一个名字，方便辨认。</li>
<li><code>screen 命令</code>直接在screen中执行命令，命令结束后screen退出。</li>
</ul>
<h1 id="分离与恢复"><a href="#分离与恢复" class="headerlink" title="分离与恢复"></a>分离与恢复</h1><p>在screen窗口中执行<code>ctrl + a d</code>命令，screen会给出_[detached]_提示，并恢复到执行screen之前的bash。<br>查找之前的screen执行<code>screen -ls</code>，会列出当前打开的screen。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">There are screens on:</span><br><span class="line">        8576.pts-3.localhost    (Attached)</span><br><span class="line">        8449.kuring     (Detached)</span><br><span class="line">2 Sockets in /tmp/uscreens/S-kuring.</span><br></pre></td></tr></table></figure>
<p>这里系统中打开了两个screen，一个为Attached，另一个为Detached。</p>
<p>重新连接执行<code>screen -r kuring</code>或<code>screen -r 8449</code>或<code>screen -r</code>，当系统中仅有一个处于Detached状态的screen时就可以直接执行<code>screen -r</code>命令。</p>
<h1 id="关闭窗口"><a href="#关闭窗口" class="headerlink" title="关闭窗口"></a>关闭窗口</h1><p>在screen的shell中执行<code>exit</code>命令即可关闭screen。</p>
<p>也可以执行<code>ctrl + a k</code>，会杀死当前screen中的所有运行进程。</p>
<h1 id="错误"><a href="#错误" class="headerlink" title="错误"></a>错误</h1><p>在screen中执行vi命令时会提示_E437: terminal capability “cm” required_错误，执行<code>echo $TERM</code>查看发现打印值为_screen_，而未执行screen时的bash打印值为_xterm_，在screen中执行<code>export TERM=xterm</code>即可解决该问题。</p>
<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p>更多高级使用方法请参考以下文档：</p>
<p><a target="_blank" rel="noopener" href="http://www.ibm.com/developerworks/cn/linux/l-cn-screen/">linux 技巧：使用 screen 管理你的远程会话</a><br><a target="_blank" rel="noopener" href="http://www.cnblogs.com/mchina/archive/2013/01/30/2880680.html">linux screen 命令详解</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/c_trim/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/c_trim/" class="post-title-link" itemprop="url">用C语言实现的trim函数</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-02-18 00:00:00" itemprop="dateCreated datePublished" datetime="2014-02-18T00:00:00+00:00">2014-02-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>trim函数在其他语言中比较常见，这里用C语言实现一个，不使用C语言的库函数。该例子中不需要额外的申请空间，算法的时间复杂度为O(1)。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line"></span><br><span class="line">char *trim(char * str)</span><br><span class="line">&#123;</span><br><span class="line">	char *buf1, *buf2;</span><br><span class="line">	int i;</span><br><span class="line">	if (str == NULL)</span><br><span class="line">	&#123;</span><br><span class="line">		return NULL;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	// 处理字符串前面的空格	</span><br><span class="line">	for (buf1=str; *buf1 &amp;&amp; *buf1==&#x27; &#x27;; buf1++);</span><br><span class="line"></span><br><span class="line">	// 将去掉前面空格的字符串向前复制</span><br><span class="line">	for (buf2=str, i=0; *buf1;)</span><br><span class="line">	&#123;</span><br><span class="line">		*buf2++ = *buf1++;</span><br><span class="line">		i++;</span><br><span class="line">	&#125;</span><br><span class="line">	*buf2 = &#x27;\0&#x27;;</span><br><span class="line"></span><br><span class="line">	// 处理字符串后面的空格</span><br><span class="line">	while (*--buf2 == &#x27; &#x27;)</span><br><span class="line">	&#123;</span><br><span class="line">		*buf2 = &#x27;\0&#x27;;</span><br><span class="line">	&#125;</span><br><span class="line">	return str;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">      printf(&quot;trim(\&quot;%s\&quot;) &quot;, argv[1]);</span><br><span class="line">      printf(&quot;returned \&quot;%s\&quot;\n&quot;, trim(argv[1]));</span><br><span class="line">      return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/centos_yum_iso/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/centos_yum_iso/" class="post-title-link" itemprop="url">CentOS中将光盘作为安装源</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-02-18 00:00:00" itemprop="dateCreated datePublished" datetime="2014-02-18T00:00:00+00:00">2014-02-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文是VMWare下的CentOS操作系统将yum源更改为光盘的实例，光盘的iso文件存放在宿主机器上，通过VMWare的共享文件夹功能与CentOS系统共享文件。CentOS中共享文件夹的存放路径为&#x2F;mnt&#x2F;hgfs中。CentOS的光盘为两张，分别为CentOS-6.5-x86_64-bin-DVD1.iso、CentOS-6.5-x86_64-bin-DVD2.iso。注意LiveCD版的CentOS系统盘是不可以作为yum源的。</p>
<h1 id="挂载光盘"><a href="#挂载光盘" class="headerlink" title="挂载光盘"></a>挂载光盘</h1><ol>
<li><code>mkdir -p /media/cdrom;mkdir -p /media/CentOS</code>，创建挂载两个挂载目录，分别挂载DVD1和DVD2。</li>
<li>执行<code>mount /mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD1.iso /media/cdrom/ -o loop;mount /mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD2.iso /media/CentOS/ -o loop;</code>，将iso挂载到创建的目录下。</li>
<li>执行<code>df -h</code>命令即可看到挂载的文件系统，输出如下：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD1.iso  4.2G  4.2G     0 100% /media/cdrom</span><br><span class="line">/mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD2.iso  1.2G  1.2G     0 100% /media/CentOS</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="设置本地yum源"><a href="#设置本地yum源" class="headerlink" title="设置本地yum源"></a>设置本地yum源</h1><p>在&#x2F;etc&#x2F;yum.repos.d目录下CentOS-Base.repo记录着yum通过网络更新的源，CentOS-Media.repo记录着通过本地文件更新的源。其中CentOS-Media.repo文件的内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"># CentOS-Media.repo</span><br><span class="line">#</span><br><span class="line">#  This repo can be used with mounted DVD media, verify the mount point for</span><br><span class="line">#  CentOS-6.  You can use this repo and yum to install items directly off the</span><br><span class="line">#  DVD ISO that we release.</span><br><span class="line">#</span><br><span class="line"># To use this repo, put in your DVD and use it with the other repos too:</span><br><span class="line">#  yum --enablerepo=c6-media [command]</span><br><span class="line">#</span><br><span class="line"># or for ONLY the media repo, do this:</span><br><span class="line">#</span><br><span class="line">#  yum --disablerepo=\* --enablerepo=c6-media [command]</span><br><span class="line"></span><br><span class="line">[c6-media]</span><br><span class="line">name=CentOS-$releasever - Media</span><br><span class="line">baseurl=file:///media/CentOS/</span><br><span class="line">        file:///media/cdrom/</span><br><span class="line">        file:///media/cdrecorder/</span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=0</span><br><span class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6</span><br></pre></td></tr></table></figure>

<p>其中已经包含了&#x2F;media&#x2F;cdrom路径和&#x2F;media&#x2F;CentOS路径，至此配置已经完毕。</p>
<p>安装软件需要通过命令<code>yum --disablerepo=\* --enablerepo=c6-media [command]</code>，执行<code>yum [command]</code>命令时还是联网执行。</p>
<h1 id="设置开启启动自动挂载iso文件"><a href="#设置开启启动自动挂载iso文件" class="headerlink" title="设置开启启动自动挂载iso文件"></a>设置开启启动自动挂载iso文件</h1><p>在&#x2F;etc&#x2F;fstab文件中的末尾增加如下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD1.iso /media/cdrom/ iso9660 loop 0 0</span><br><span class="line">/mnt/hgfs/iso/CentOS-6.5-x86_64-bin-DVD2.iso /media/CentOS/ iso9660 loop 0 0</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/x_window/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/x_window/" class="post-title-link" itemprop="url">X Window学习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-02-17 00:00:00" itemprop="dateCreated datePublished" datetime="2014-02-17T00:00:00+00:00">2014-02-17</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>X Window的实现机制还是比较难以理解的，尤其是跟软件开发中的客户端-服务器模式不太一样。涉及到概念也比较多，甚至很对教程对概念的理解不一。最近深入学习了下X Window的原理，在此做一下整理。先上一个摘自维基百科的图：<br><img src="/ref/x_window/X_client_server_example.svg.png" alt="X Window架构"></p>
<p>常用快捷键<br>ctrl+alt+fn：切换到相应的虚拟控制台，n为1-12。默认情况下，linux操作系统会在1-6上运行6个虚拟控制台。<br>ctrl+alt+退格键：关闭X window系统。<br>在vmware环境下，ctrl+alt快捷键跟vmware冲突，需要先按住ctrl+alt，然后按一下空格键并松开，再按下相应的fn键才能使用。</p>
<p>X Server<br>负责硬件管理、屏幕绘制、字体，并接收输入设备（如键盘、鼠标等）的动作，并且告知X Client。<br>Linux下的X Server软件为Xorg，通过X（Xorg的链接文件）命令即可执行。<br>输入X命令后，会在第7个控制台启动X Server，将会出现一个什么都没有的漆黑界面，这是由于没有任何X client程序输入的原因。<br>可以在Linux下启动多个X Server软件，从0开始编号。如果再执行<code>X:2</code>命令会启动第二个X Server，此时X Server会在第8个控制台运行。如果第一次执行的是<code>X:2</code>命令则X Server会在第7个控制台运行。<br>在Windows操作系统下的Xming、Xmanager等可以远程连接Linux界面的软件其实就是X Server。</p>
<p>X Client<br>即X应用程序，运行在X Window下的窗口程序都属于X client。比如firefox就是一个X Client。接收来自X Server的处理动作，将动作处理成为绘图数据，并将绘图数据传回给X Server。X Client与X Server之间通过X Window System Core Protocol协议进行通讯。<br>xclock是一个简易的X Client的时钟程序，在:1上启动X Server后，执行<code>xclock –display :1&amp;</code>命令将xclock输出到X Server后的画面如下：<br><img src="/ref/x_window/xclock_no_wm.png" alt="xclock"><br>该程序可以在X Server上执行，但是画面非常简陋，甚至没有窗口的菜单栏和最大化等按钮。</p>
<p>Window Manager<br>一种特殊的X Client，提供了窗口的样式。常用的Window Manager包括GNOME默认的metacity、twm等。<br>将metacity输出到:1上的X Server的命令为<code>metacity –display=:1 &amp;</code>，效果如下：<br><img src="/ref/x_window/xclock_wm.png" alt="Image Title"><br>可以看到窗口多出了最小化、最大化、关闭按钮，并且窗口可以移动和缩放等操作。</p>
<p>Display Manager<br>提供用户登录画面、帮助X Server建立Session。<br>gnome采用的Display Manager为gdm，KDE采用kdm，还有tdm、xdm等。</p>
<p>Desktop Manager<br>X Server、X Client、Window Manager的一个集合。常用的Desktop Manager包括：KDE、GNOME等。</p>
<p>startx启动流程<br>在命令行下执行startx命令后，系统直接进入了桌面环境，并未出现登录界面。进程树如下：<br><img src="/ref/x_window/startx_pstree.png" alt="Image Title"></p>
<ol>
<li>startx会调用xinit命令，xinit命令的主要是启动一个X Server软件。</li>
<li>接着xinit命令会调用gnome-session启动gnome的环境所需要的软件。</li>
</ol>
<p>init 5启动流程<br>在命令行下执行init 5，首先出现的画面为登录信息。进程树如下：<br><img src="/ref/x_window/init5_pstree.png" alt="Image Title"></p>
<ol>
<li>执行&#x2F;etc&#x2F;rc.d&#x2F;rc5.d中的daemon。</li>
<li>执行&#x2F;etc&#x2F;X11&#x2F;prefdm文件，会选择启动gdm、kdm、xdm、tdm。</li>
<li>这里以gdm为例，gdm是一个shell脚本，会启动gdm-binary命令。</li>
</ol>
<p>实战<br>Windows主机连接Linux的教程参见我的另外一篇文章《Redhat安装完成之后的设置》中的相关部分。<br>两台Linux机器之间通过XWindow实现连接的用法比较少见，通常情况下可以通过vnc代替。<br>Linux主机连接Windows的工具为rdesktop。</p>
<p>参考文章<br>《鸟哥的Linux私房菜》<br>《Linux操作系统之奥秘》<br>视频：<a target="_blank" rel="noopener" href="http://edu.51cto.com/lesson/id-12709.html">RH033-ULE112-16-linux下X图形显示体系</a><br>视频：<a target="_blank" rel="noopener" href="http://www.rhce.cc/?p=1117">Xwindow详解</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/linux_net_tools/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/linux_net_tools/" class="post-title-link" itemprop="url">Linux常用网络诊断工具整理</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-02-08 00:00:00" itemprop="dateCreated datePublished" datetime="2014-02-08T00:00:00+00:00">2014-02-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>本文对Linux常用的网络命令进行整理和总结。</p>
<h1 id="连通性测试"><a href="#连通性测试" class="headerlink" title="连通性测试"></a>连通性测试</h1><h2 id="ping命令"><a href="#ping命令" class="headerlink" title="ping命令"></a>ping命令</h2><p>最常用的网络诊断命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[kuring@localhost ~]$ ping www.baidu.com</span><br><span class="line">PING www.a.shifen.com (61.135.169.125) 56(84) bytes of data.</span><br><span class="line">64 bytes from 61.135.169.125: icmp_seq=1 ttl=128 time=25.5 ms</span><br><span class="line">64 bytes from 61.135.169.125: icmp_seq=2 ttl=128 time=20.3 ms</span><br><span class="line">64 bytes from 61.135.169.125: icmp_seq=3 ttl=128 time=25.0 ms</span><br><span class="line">64 bytes from 61.135.169.125: icmp_seq=4 ttl=128 time=21.7 ms</span><br><span class="line">64 bytes from 61.135.169.125: icmp_seq=5 ttl=128 time=23.4 ms</span><br><span class="line">64 bytes from 61.135.169.125: icmp_seq=6 ttl=128 time=21.9 ms</span><br></pre></td></tr></table></figure>
<p>通过上述输出可以看出，ping命令可得到DNS对应的IP信息、ping的数据包大小、网络延迟信息。</p>
<p>另外，可以通过-s参数指定ping的数据包大小。例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">kuring@ubuntu:~$ ping www.baidu.com -s 1024</span><br><span class="line">PING www.a.shifen.com (61.135.169.125) 1024(1052) bytes of data.</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=1 ttl=55 time=22.6 ms</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=2 ttl=55 time=22.9 ms</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=3 ttl=55 time=53.0 ms</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=4 ttl=55 time=28.0 ms</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=5 ttl=55 time=54.7 ms</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=6 ttl=55 time=93.1 ms</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=7 ttl=55 time=26.9 ms</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=8 ttl=55 time=25.2 ms</span><br><span class="line">1032 bytes from 61.135.169.125: icmp_req=9 ttl=55 time=25.4 ms</span><br><span class="line">^C1032 bytes from 61.135.169.125: icmp_req=10 ttl=55 time=21.2 ms</span><br><span class="line"></span><br><span class="line">--- www.a.shifen.com ping statistics ---</span><br><span class="line">10 packets transmitted, 10 received, 0% packet loss, time 45436ms</span><br><span class="line">rtt min/avg/max/mdev = 21.225/37.350/93.149/21.966 ms</span><br></pre></td></tr></table></figure>
<p>会发现ping命令的响应时间变长了，这正是由于ping发送数据包变大了。</p>
<h2 id="traceroute"><a href="#traceroute" class="headerlink" title="traceroute"></a>traceroute</h2><p>可以显示路由信息。</p>
<h2 id="mtr"><a href="#mtr" class="headerlink" title="mtr"></a>mtr</h2><p>traceroute命令的升级版，可以动态刷新路由信息，可以显示路由上每个节点的丢包率和时间等信息，信息比较全面和直观。</p>
<h1 id="arp相关"><a href="#arp相关" class="headerlink" title="arp相关"></a>arp相关</h1><h2 id="arping"><a href="#arping" class="headerlink" title="arping"></a>arping</h2><p>可以通过该命令查看IP地址对应的mac地址。<code>arping IP地址</code>会立即发送一个arp广播，可以根据收到的arp回应的多少看局域网内是否中arp病毒、IP地址冲突等情况。</p>
<h2 id="arp"><a href="#arp" class="headerlink" title="arp"></a>arp</h2><p>跟arp协议相关，可以设置arp表、读取arp表等。</p>
<h1 id="端口相关"><a href="#端口相关" class="headerlink" title="端口相关"></a>端口相关</h1><h2 id="telnet"><a href="#telnet" class="headerlink" title="telnet"></a>telnet</h2><p>可以利用该命令来测试某个端口是否打开。例如执行<code>telnet localhost 881</code>其中881为本机的未打开端口，会产生如下输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Trying 127.0.0.1...</span><br><span class="line">telnet: connect to address 127.0.0.1: Connection refused</span><br></pre></td></tr></table></figure>

<p>执行<code>telnet localhost 22</code>，其中22端口为本机的ssh服务端口且已经打开，会产生如下输出：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Trying 127.0.0.1...</span><br><span class="line">Connected to localhost.</span><br><span class="line">Escape character is &#x27;^]&#x27;.</span><br><span class="line">SSH-2.0-OpenSSH_5.3</span><br></pre></td></tr></table></figure>

<p>则表示本机的22端口已经打开。</p>
<h2 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h2><p>查看本机网络端口命令，常用<code>netstat -aunp</code>。</p>
<p>#DNS相关</p>
<h2 id="host"><a href="#host" class="headerlink" title="host"></a>host</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kuring@ubuntu:~$ host www.google.com.hk</span><br><span class="line">www.google.com.hk is an alias for www-wide.l.google.com.</span><br><span class="line">www-wide.l.google.com has address 74.125.128.199</span><br><span class="line">www-wide.l.google.com has IPv6 address 2404:6800:4005:c00::c7</span><br></pre></td></tr></table></figure>

<h2 id="nslookup"><a href="#nslookup" class="headerlink" title="nslookup"></a>nslookup</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">kuring@ubuntu:~$ nslookup www.google.com.hk</span><br><span class="line">Server:		127.0.0.1</span><br><span class="line">Address:	127.0.0.1#53</span><br><span class="line"></span><br><span class="line">Non-authoritative answer:</span><br><span class="line">www.google.com.hk	canonical name = www-wide.l.google.com.</span><br><span class="line">Name:	www-wide.l.google.com</span><br><span class="line">Address: 74.125.128.199</span><br></pre></td></tr></table></figure>

<h2 id="dig"><a href="#dig" class="headerlink" title="dig"></a>dig</h2><p>可以代替nslookup的命令，显示的域名信息更为详细。</p>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h1 id="ab"><a href="#ab" class="headerlink" title="ab"></a>ab</h1><p>Linux下的压力测试工具，可以模拟多个客户端发送多个请求。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">kuring@ubuntu:~$ ab -c 100 -n 100 http://kuring.me/</span><br><span class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 655654 $&gt;</span><br><span class="line">Copyright 1996 Adam Twiss, Zeus Technology Ltd, http://www.zeustech.net/</span><br><span class="line">Licensed to The Apache Software Foundation, http://www.apache.org/</span><br><span class="line"></span><br><span class="line">Benchmarking kuring.me (be patient).....done</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Server Software:        Tengine/2.0.0</span><br><span class="line">Server Hostname:        kuring.me</span><br><span class="line">Server Port:            80</span><br><span class="line"></span><br><span class="line">Document Path:          /</span><br><span class="line">Document Length:        707 bytes</span><br><span class="line"></span><br><span class="line">Concurrency Level:      100</span><br><span class="line">Time taken for tests:   1.547 seconds</span><br><span class="line">Complete requests:      100</span><br><span class="line">Failed requests:        10</span><br><span class="line">   (Connect: 0, Receive: 0, Length: 10, Exceptions: 0)</span><br><span class="line">Write errors:           0</span><br><span class="line">Non-2xx responses:      90</span><br><span class="line">Total transferred:      145330 bytes</span><br><span class="line">HTML transferred:       126570 bytes</span><br><span class="line">Requests per second:    64.64 [#/sec] (mean)</span><br><span class="line">Time per request:       1546.990 [ms] (mean)</span><br><span class="line">Time per request:       15.470 [ms] (mean, across all concurrent requests)</span><br><span class="line">Transfer rate:          91.74 [Kbytes/sec] received</span><br><span class="line"></span><br><span class="line">Connection Times (ms)</span><br><span class="line">              min  mean[+/-sd] median   max</span><br><span class="line">Connect:      173  223  43.8    200     289</span><br><span class="line">Processing:   167  340 301.5    236    1368</span><br><span class="line">Waiting:      166  339 300.5    235    1364</span><br><span class="line">Total:        345  563 295.4    438    1546</span><br><span class="line"></span><br><span class="line">Percentage of the requests served within a certain time (ms)</span><br><span class="line">  50%    438</span><br><span class="line">  66%    555</span><br><span class="line">  75%    562</span><br><span class="line">  80%    597</span><br><span class="line">  90%   1108</span><br><span class="line">  95%   1474</span><br><span class="line">  98%   1484</span><br><span class="line">  99%   1546</span><br><span class="line"> 100%   1546 (longest request)</span><br></pre></td></tr></table></figure>

<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a target="_blank" rel="noopener" href="http://edu.51cto.com/lesson/id-12697.html">解决Linux服务器访问比较慢的问题-网络测试命令讲解</a></li>
<li>《鸟哥的Linux私房菜-服务器架设篇》</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/cgdb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/cgdb/" class="post-title-link" itemprop="url">cgdb的使用</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-02-02 00:00:00" itemprop="dateCreated datePublished" datetime="2014-02-02T00:00:00+00:00">2014-02-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>长期以来在使用gdb调试代码的时候都会因为调试代码的时候查看代码不方便而烦恼，gdb的list命令不够好用。而且网上的教程中也确实不容易发现可以替代gdb的好的终端下的调试工具，对于图形界面的集成开发环境（比如Eclipse CDT）和图形界面的调试工具（比如DDD）不在本文讨论的范围内，毕竟很多时候连接linux的时候还是终端方式的居多。</p>
<h1 id="tui模式"><a href="#tui模式" class="headerlink" title="tui模式"></a>tui模式</h1><p>直到后来偶然间发现了gdb的<code>-tui</code>参数，该参数通过文本用户界面模式进行调试代码，使用起来确实方便了许多，再也不用边调试边list代码了，该模式已经满足了我的边调试边查看代码的需求。另外，gdbtui命令也可完成相同的功能。一个tui调试模式的界面如下：</p>
<p><img src="http://beej.us/guide/bggdb/gdbwinss.png" alt="gdb -tui"></p>
<p>虽然，tui模式大大的提供了调试的友好性，但是仍然有一些缺点。比如显示的代码无法语法高亮，虽然会很影响用户体验，但是我毕竟是一名后台开发的程序员，这点可以忽略不计。源码布局和gdb命令布局之间切换不够方便，这点也不要紧，毕竟可以切换，只是需要输入两个单词就可以切换了。最最有问题的就是，该命令使用的时curses库，当用ssh通过windows下的SecureCRT或者putty连接进行调试时，源码布局部分往往不能够自动刷新，需要手工输入<code>CTRL+L</code>来刷新，具体的原理我没有去深究。</p>
<h1 id="cgdb"><a href="#cgdb" class="headerlink" title="cgdb"></a>cgdb</h1><p>主要是本着解决gdb tui中的源码布局不能自动刷新的问题，本文的重点<code>cgdb</code>命令终于闪亮登场了。该命令不仅解决了源码布局自动刷新问题，同时也支持了语法高亮，同时源码查看支持vi的部分命令。功能基本跟vimgdb相近，但是安装更容易，在ubuntu下只需执行<code>sudo apt-get install cgdb</code>即可。</p>
<p><img src="https://cgdb.github.io/images/screenshot_debugging.png" alt="cgdb"></p>
<p>下面是一些常用命令：</p>
<p>ESC：切换焦点到源码模式，在该界面中可以使用vi的常用命令</p>
<p>i：切换焦点到gdb模式</p>
<p>o：打开文件对话框，选择要显示的代码文件，按ESC取消</p>
<p>空格：在当前行设置一个断点</p>
<h1 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h1><p><a target="_blank" rel="noopener" href="http://beej.us/guide/bggdb/">Beej’s Quick Guide to GDB</a><br><a target="_blank" rel="noopener" href="https://cgdb.github.io/">cgdb</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/lfs/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/lfs/" class="post-title-link" itemprop="url">Linux From Scratch学习笔记</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-01-20 00:00:00" itemprop="dateCreated datePublished" datetime="2014-01-20T00:00:00+00:00">2014-01-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>最近买了本新书《深度探索Linux操作系统》，在按照书中步骤学习的过程中，无奈在安装步骤中出错，于是只能到网上找书评。在浏览书评的过程中偶然看到LFS三个名词，google之，发现是手动安装Linux的官方学习手册，学习之。</p>
<h1 id="解压命令"><a href="#解压命令" class="headerlink" title="解压命令"></a>解压命令</h1><p>一直对解压命令的参数记不清楚，记录一下：<br>tar -Jvxf *.tar.xz<br>tar -zvxf *.tar.gz<br>tar -xvf *.tar.bz2</p>
<h1 id="将一般用户可以使用sudo命令执行命令的方法"><a href="#将一般用户可以使用sudo命令执行命令的方法" class="headerlink" title="将一般用户可以使用sudo命令执行命令的方法"></a>将一般用户可以使用sudo命令执行命令的方法</h1><p>执行visudo命令来修改文件内容，将本用户添加到文本文件中。修改的文件为&#x2F;etc&#x2F;sudoers，该文件默认为只读的，但是可以通过visudo命令来修改。</p>
<h1 id="login-shell和non-login-shell"><a href="#login-shell和non-login-shell" class="headerlink" title="login shell和non-login shell"></a>login shell和non-login shell</h1><p>login shell：shell会重新读取&#x2F;etc&#x2F;profile和<del>&#x2F;.bash_profile来应用新的环境变量。通过<code>su - 用户名</code>的方式登录为login shell方式。<br>non-login shell：此时shell不会读取&#x2F;etc&#x2F;profile和</del>&#x2F;.bash_profile，而是读取~&#x2F;.bashrc来应用新的环境变量。通过<code>su 用户名</code>登录的方式为non-login shell方式。</p>
<p>文中lfs用户下的~&#x2F;.bash_profile的内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exec env -i HOME=$HOME TERM=$TERM PS1=&#x27;\u:\w\$ &#x27; /bin/bash</span><br></pre></td></tr></table></figure>

<p>而lfs用户下的~&#x2F;.bashrc文件的内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">set +h</span><br><span class="line">umask 022</span><br><span class="line">LFS=/mnt/lfs</span><br><span class="line">LC_ALL=POSIX</span><br><span class="line">LFS_TGT=$(uname -m)-lfs-linux-gnu</span><br><span class="line">PATH=/tools/bin:/bin:/usr/bin</span><br><span class="line">export LFS LC_ALL LFS_TGT PATH</span><br></pre></td></tr></table></figure>

<p>而最令人奇怪的是即使通过<code>su - lfs</code>命令登录也会执行到.bashrc文件的内容，不信可以通过在.bash_profile和.bashrc文件的开始地方打印内容来验证。之所以出现如此奇怪的问题，原因在于~&#x2F;.bash_profile中的命令。其中exec命令和linux系统中的exec系列函数的含义是一致的，即在当前bash中直接执行exec后面的命令，而不用fork一个新的进程来执行。env命令会通过当前用户的HOME和TERM环境变量及自定义的PS1环境变量来执行新的&#x2F;bin&#x2F;bash，而新执行的bash为non-login shell方式，因此会执行lfs用户下的.bahsrc文件。</p>
<p>总结一下，就是~&#x2F;.bash_profile文件中的env命令通过non-login shell方式执行了新的bash，exec命令的作用是不在当前bash中执行新的bash，而不是通过产生一个新进程的方式来执行bash。</p>
<h1 id="POSIX-amp-amp-FHS-amp-amp-LSB"><a href="#POSIX-amp-amp-FHS-amp-amp-LSB" class="headerlink" title="POSIX &amp;&amp; FHS &amp;&amp; LSB"></a>POSIX &amp;&amp; FHS &amp;&amp; LSB</h1><p><a target="_blank" rel="noopener" href="http://pubs.opengroup.org/onlinepubs/9699919799/">POSIX.1-2008</a>，通过该网站来查询系统函数等非常方便。<br>Filesystem Hierarchy Standard (FHS)<br><a target="_blank" rel="noopener" href="http://www.pathname.com/fhs/pub/fhs-2.3.html">Filesystem Hierarchy Standard (FHS)</a>，可以通过此标准来学习Linux的目录含义。<br><a target="_blank" rel="noopener" href="http://refspecs.linuxfoundation.org/lsb.shtml">Linux Standard Base (LSB) Specifications</a></p>
<h1 id="set-h"><a href="#set-h" class="headerlink" title="set +h"></a>set +h</h1><p>The set +h command turns off bash’s hash function. Hashing is ordinarily a useful feature—bash uses a hash table to remember the full path of executable files to avoid searching the PATH time and again to find the same executable.</p>
<h1 id="虚拟终端PTYs"><a href="#虚拟终端PTYs" class="headerlink" title="虚拟终端PTYs"></a>虚拟终端PTYs</h1><p>PTY 设备与终端设备（terminal device）相类似——它接受来自键盘的输入，并将文字传递给运行在其上的程序以备输出。PTY 被依次编号，且每个 PTY 的编号就是它在 &#x2F;dev&#x2F;pts 目录中对应设备文件的文件名。</p>
<h1 id="devpts-file-system"><a href="#devpts-file-system" class="headerlink" title="devpts file system"></a>devpts file system</h1><p>远程登陆(telnet,ssh等)后创建的控制台设备文件所在的目录。 </p>
<h1 id="specs文件"><a href="#specs文件" class="headerlink" title="specs文件"></a>specs文件</h1><p>gcc 是一个驱动式的程序. 它调用其它程序来依次进行编译, 汇编和链接. GCC 分析命令行参数, 然后决定该调用哪一个子程序, 哪些参数应该传递给子程序. 所有这些行为都是由 SPEC 字符串(spec strings)来控制的. 通常情况下, 每一个 GCC 可以调用的子程序都对应着一个 SPEC 字符串, 不过有少数的子程序需要多个 SPEC 字符串来控制他们的行为.</p>
<h1 id="查看当前shell"><a href="#查看当前shell" class="headerlink" title="查看当前shell"></a>查看当前shell</h1><ol>
<li>查看默认shell可以用命令：<code>echo $SHELL</code>。</li>
<li>查看当前shell：<code>ps | grep $$ | awk &#39;&#123;print $4&#125;&#39; </code>。</li>
<li>通过输入一个不存在的命令来查看，如输入tom，可显示<code>bash: tom: command not found</code>，说明当前的shell为bash。</li>
</ol>
<h1 id="expect"><a href="#expect" class="headerlink" title="expect"></a>expect</h1><p>一种提供自动交互的脚本语言。</p>
<h1 id="tee命令"><a href="#tee命令" class="headerlink" title="tee命令"></a>tee命令</h1><p>重定向输出到多个文本文件命令。</p>
<h1 id="pkg-config"><a href="#pkg-config" class="headerlink" title="pkg-config"></a>pkg-config</h1><p>configure脚本在检查相应依赖环境时(例：所依赖软件的版本、相应库版本等)，通常会通过pkg-config的工具来检测相应依赖环境。</p>
<p>详细内容见：<a target="_blank" rel="noopener" href="http://www.mike.org.cn/articles/description-configure-pkg-config-pkg_config_path-of-the-relations-between/">简述configure、pkg-config、pkg_config_path三者的关系</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/2013_summary/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/2013_summary/" class="post-title-link" itemprop="url">2013年总结</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2014-01-07 00:00:00" itemprop="dateCreated datePublished" datetime="2014-01-07T00:00:00+00:00">2014-01-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>2013年在不经意间过去了，总结起来收获还是不小的。我的大部分业余时间用在了学习上，看书看书再看书。每个周五或周六晚上会玩上一晚上dota以放松，周末会抽一天时间出去散散心。</p>
<h1 id="学习"><a href="#学习" class="headerlink" title="学习"></a>学习</h1><p>学习上进步还算比较大，学习方式以看书为主，尤其是对Linux有了较深入了解。在年初的时候制定了深入学习Linux的计划，包括Linux内核，大约从五月下旬开始学习。</p>
<h2 id="信息系统项目管理师"><a href="#信息系统项目管理师" class="headerlink" title="信息系统项目管理师"></a>信息系统项目管理师</h2><p>当时抱着该考试可以挂靠的心态来学习PM，从春节后开始学习，五月末考试，大约花了三个月时间。学习思路为从淘宝上买的YY讲课的培训视频，价格还算便宜，隔一天晚上上一课，一次讲课时间在一个半小时左右。听了几次课之后就发现老师废话挺多，但是如果自己看书复习又抓不住重点，因此还是硬着头皮听老师讲课，就当作休息了。参考图书共三本，加起来足够2000页的样子，还做了历年的部分真题。由于自己手懒，写作在考试之前没有写过一篇，只是在考试之前背了两篇范文，结果考试的时候写作没有压中，离分数线差了两分。</p>
<p>下半年考试没有报名，经过了一次考试后看清了PM的真面目，纯属搞理论，距离实际太远。如果为了挂靠去花费宝贵的业余时间来学习实在有点不得不偿失。现在回想起来多少有些后悔，但是不尝试怎么能知道PM到底是个啥东西呢。</p>
<h2 id="Linux"><a href="#Linux" class="headerlink" title="Linux"></a>Linux</h2><p>Linux的系统知识今年进步挺大的，无论是在编码、对系统的理解还是内核方面都有非常大的进步。</p>
<h3 id="《鸟哥的Linux私房菜–基础学习篇》"><a href="#《鸟哥的Linux私房菜–基础学习篇》" class="headerlink" title="《鸟哥的Linux私房菜–基础学习篇》"></a>《鸟哥的Linux私房菜–基础学习篇》</h3><p>两年多前看过一次，利用工作中的空闲时间重新回顾了一边，收获还是挺大的。</p>
<h3 id="《鸟哥的Linux私房菜–服务器架设篇》"><a href="#《鸟哥的Linux私房菜–服务器架设篇》" class="headerlink" title="《鸟哥的Linux私房菜–服务器架设篇》"></a>《鸟哥的Linux私房菜–服务器架设篇》</h3><p>两年前买的书，当时没有通读，感觉含金量跟基础学习篇太大。利用工作之余通读一遍，收获也还算可以。</p>
<h3 id="《Unix环境高级编程》"><a href="#《Unix环境高级编程》" class="headerlink" title="《Unix环境高级编程》"></a>《Unix环境高级编程》</h3><p>Linux编程圣经，花了接近两个月时间看完，看完后收获很大。</p>
<h3 id="《Unix网络编程》"><a href="#《Unix网络编程》" class="headerlink" title="《Unix网络编程》"></a>《Unix网络编程》</h3><p>Linux网络编程圣经，花了一个月时间看完，看完后对写TCP&#x2F;IP通信的程序很有帮助，作为《Unix环境高级编程》的很好补充。</p>
<h3 id="《Linux内核完全剖析》"><a href="#《Linux内核完全剖析》" class="headerlink" title="《Linux内核完全剖析》"></a>《Linux内核完全剖析》</h3><p>该书花了我接近半年的时间来学习，现在看完了五分之四左右，还有文件系统章节没有学习。学习下来收获很大，后续会结合《Linux内核图解》一书来补充学习和归纳。</p>
<h3 id="《程序员的自我修养》"><a href="#《程序员的自我修养》" class="headerlink" title="《程序员的自我修养》"></a>《程序员的自我修养》</h3><p>通过学习对Linux的elf和windows的pe结构都有了较深入的了解，不过事隔半年之后已经全部忘记了，需要再温习一遍。</p>
<h2 id="微信公共帐号"><a href="#微信公共帐号" class="headerlink" title="微信公共帐号"></a>微信公共帐号</h2><p>从年初开始，每天会花一定时间来阅读微信公共帐号的文章，初期订阅的文章基本都会阅读，后期订阅量大了有些就仅浏览标题了。我订阅的公共帐号里比较好的有：鬼脚七、道哥的黑板报、小道消息、Mac Talk等。鬼脚七写人生类的文章我比较喜欢看，也比较赞同作者的观点。</p>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>###《30天自制操作系统》<br>从2012年年底开始读的图书，花了接近三个月的时间通读，读到中间部分还反过头来重读一遍。学习到三分之二的时候感觉对我用处不大，因为不会对我理解Linux或Windows操作系统有太大帮助，放弃之。</p>
<h3 id="《Hadoop权威指南》"><a href="#《Hadoop权威指南》" class="headerlink" title="《Hadoop权威指南》"></a>《Hadoop权威指南》</h3><p>项目需要，对Hadoop没有足够的兴趣，理解了是怎么回事对我就足够了。同时还研究了Solr、HBase、MonogoDB等大数据软件。</p>
<h3 id="《Git权威指南》"><a href="#《Git权威指南》" class="headerlink" title="《Git权威指南》"></a>《Git权威指南》</h3><p>向对Git有进一步的理解，目前仅看完了一半，分支管理部分还没有学习。</p>
<p>###《浪潮之巅》<br>吴军博士的经典，我主要拿来在看书看累的时候消遣用，和《黑客与画家》的效果相当，很抱歉看了大半年了到现在仍然在看。</p>
<h3 id="《深度探索C-对象模型》"><a href="#《深度探索C-对象模型》" class="headerlink" title="《深度探索C++对象模型》"></a>《深度探索C++对象模型》</h3><p>之前曾一度要学习，无奈一直没有看进去，lippman写的和侯捷翻译的实在是诡异。这次边写博客记录边看，居然效果很不错。最后时间有限，留了个小尾巴没有看完。</p>
<h1 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h1><p>由于之前的公司经营不善，加上今年全国经济形式不好，公司持续几个月发不下工资来，考虑到个人经济状况换了一份工作。在济南这种小地方，找个理想的工作实在是不容易，甚至今年很多公司都不再招聘。我找工作以技术为导向，家附近一堆做电信BOSS的外包公司，一概不考虑。新工作还算可以，依旧加班较少，只是周六是间歇性上班，这个可以忍，还算有较充足的业余时间来学习。</p>
<p>工作中用到的技术以C、C++为主，兼涉及到Android、PHP等。从元旦之后上班第一天，自己单打独斗从零开始做了一个短信管家类项目，到五月份后终止，结果跟我预想的完全一致，以失败而告终。回想当初真该将我当时对项目的看法跟领导沟通一下，而不是盲目的接下公司安排的任务。当时领导对互联网、APP的理解完全是幼稚园水平，一家传统行业的软件企业想来玩转互联网行业困难可想而知，我作为唯一的项目成员在项目的开始已经看到了没有任何意外的结局。如果当初将这五个多月的时间用来做些Linux的东西，对我个人的成长将是相当巨大的。</p>
<h1 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h1><p>2013经济上不是很宽裕，没有旅游，仅有的一次市外旅游是南部山区的红叶谷。在济南这种地方，工资压得低，技术牛人又少，实在悲剧。生活虽然对我少了些许精彩，但过的还算比较充实。</p>
<h1 id="博客"><a href="#博客" class="headerlink" title="博客"></a>博客</h1><p>为了能够更好的总结学习经验，年初准备有写博客的计划。之前零零散散的也写过一些，没有坚持住，现在看来我的博客写作计划坚持的还算不错，从6月份到年底共写了40篇博客，大都是自己的学习经验总结。前期博客写了一些非技术类博文，后期觉得没有这个必要不再写非技术类博客。</p>
<p>为了搭建博客，又不想花钱买个不稳定的空间。我研究了Github上的jekyll、基于网盘（DropBox、Google Driver）的Farbox等搭建博客技术，参照了大量的jekyll主题，几乎将jekyll wiki上列出的主题都看了一个遍，也没有发现一个令我非常满意的主题，后挑选一个主题在Github上实验，不知是我markdown语法写的问题还是Github对markdown的解析问题，解析效果不够理想，但是我写的markdown在Farbox上却没有问题。最后采用了Farbox作为博客平台，并对Farbox的默认主题进行了少量修改。并从Godaddy上购买了kuring.me域名。</p>
<h1 id="2014年计划"><a href="#2014年计划" class="headerlink" title="2014年计划"></a>2014年计划</h1><p>2014，除了工作之外，我也业余时间仍然会大部分奉献给阅读书籍，以Linux内核方向为主。趁着年轻，多读些书，永远是正确的。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://kuring.me/post/xrandr/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="404频道">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | 404频道">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/post/xrandr/" class="post-title-link" itemprop="url">Linux下更改屏幕分辨率</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2013-11-15 00:00:00" itemprop="dateCreated datePublished" datetime="2013-11-15T00:00:00+00:00">2013-11-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-02-10 17:05:41" itemprop="dateModified" datetime="2024-02-10T17:05:41+00:00">2024-02-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>在Virbutal Box下安装CentOS虚拟机，在安装完Virtual Box增强功能后在分辨率列表中，仍然没有适合屏幕的分辨率1600*900。本文将通过xrandr命令来修改当前屏幕的分辨率。</p>
<p>一. 执行<code>xrand -q</code>列出当前系统中已有的分辨率。显示内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Screen 0: minimum 64 x 64, current 1024 x 768, maximum 32000 x 32000</span><br><span class="line">VBOX0 connected 1024x768+0+0 0mm x 0mm</span><br><span class="line">   1024x768       60.0*+   60.0* </span><br><span class="line">   1600x1200      60.0  </span><br><span class="line">   1440x1050      60.0  </span><br><span class="line">   1280x960       60.0  </span><br><span class="line">   800x600        60.0  </span><br><span class="line">   640x480        60.0</span><br></pre></td></tr></table></figure>
<p>需要特别注意的是VBOX0，代表显示器的名字，下面会用到。</p>
<p>二. 执行<code>cvt 1600 900</code>命令列出分辨率1600*900需要的参数，后面会用到。显示内容如下:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 1600x900 59.95 Hz (CVT 1.44M9) hsync: 55.99 kHz; pclk: 118.25 MHz</span><br><span class="line">Modeline &quot;1600x900_60.00&quot;  118.25  1600 1696 1856 2112  900 903 908 934 -hsync +vsync</span><br></pre></td></tr></table></figure>
<p>该命令列出的内容下文会用到。</p>
<p>三. 执行<code>xrandr --newmode &quot;1600x900_60.00&quot;  118.25  1600 1696 1856 2112  900 903 908 934 -hsync +vsync</code>命令，该命令中的参数是参考步骤2中的输出信息。</p>
<p>四. 执行<code>xrandr --addmode VBOX0 1600x900_60.00</code>来向系统分辨率组中添加分辨率1600*900。其中VBOX0为步骤1获取的显示器名字，1600x900_60.00为步骤3添加的分辨率模式。</p>
<p>五. 执行<code>xrandr --output VBOX0 1600x900_60.00</code>来应用刚才添加的分辨率。这样屏幕就可以更改为正确的分辨率了。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/page/18/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><span class="page-number current">19</span><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/20/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder"></span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  





</body>
</html>
